(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.administrationToolbar={get:function(){var s;s=a(".admin-bar");if(s.length>0)s=s;else{s=a("form");if(s.length>1)s=a("body");s.prepend(a('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>'));s=a(".admin-bar")}return s}}})(jQuery,window);
(function(a){var s=function(d){d.toggle=a("<a></a>").attr({href:"#"});d.element.append(d.toggle);d.toggle.evolutionToggleLink({onHtml:"<span></span>"+a.telligent.evolution.html.encode(k(d,d.settings.deleteBookmarkText)),offHtml:"<span></span>"+a.telligent.evolution.html.encode(k(d,d.settings.addBookmarkText)),processingHtml:"<span></span>"+a.telligent.evolution.html.encode(k(d,d.settings.processingText)),changeState:function(n){c(n,d)},onTitle:k(d,d.settings.deleteBookmarkText),offTitle:k(d,d.settings.addBookmarkText),
processingTitle:k(d,d.settings.processingText),onCssClass:d.settings.deleteBookmarkCssClass,offCssClass:d.settings.addBookmarkCssClass,processingCssClass:d.settings.processingCssClass,val:d.settings.initialState})},k=function(d,n){return n.replace(/\{content_type_name\}/gi,d.settings.contentTypeName)},j=function(d,n){a.telligent.evolution.messaging.publish("ui.bookmark",{contentId:d.settings.contentId,contentTypeId:d.settings.contentTypeId,typeId:d.settings.typeId,bookmarked:n})},c=function(d,n){d?
n.settings.onBookmark(n.settings.contentId,n.settings.contentTypeId,n.settings.typeId,function(){j(n,true)}):n.settings.onUnbookmark(n.settings.contentId,n.settings.contentTypeId,n.settings.typeId,function(){j(n,false)})},g=function(d){a.telligent.evolution.messaging.subscribe("ui.bookmark",function(n){n.contentId===d.settings.contentId&&n.contentTypeId===d.settings.contentTypeId&&n.typeId===d.settings.typeId&&d.toggle&&d.toggle.evolutionToggleLink("val",n.bookmarked)})};a.fn.evolutionBookmark=function(d){var n=
a.extend({},a.fn.evolutionBookmark.defaults,d||{});return this.each(function(){var l={element:a(this),toggle:null,settings:n};s(l);g(l)})};a.fn.evolutionBookmark.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:false,contentTypeName:"",onBookmark:function(){},onUnbookmark:function(){},deleteBookmarkText:"Unbookmark {content_type_name}",addBookmarkText:"Bookmark this {content_type_name}",processingText:"...",addBookmarkCssClass:"internal-link favorite-off",deleteBookmarkCssClass:"internal-link favorite-on",
processingCssClass:"internal-link processing"}})(jQuery);(function(a){var s=!a.browser.msie&&"oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");a.event.special.textinput={setup:function(){var k=a(this);if(s)k.bind("input",function(c){k.trigger("textinput",{which:c.which})});else{var j;k.bind({keydown:function(){j=k.val()},keyup:function(c){var g=k.val();g!==j&&k.trigger("textinput",{which:c.which});j=g}})}}}})(jQuery);
(function(a){var s=function(b,r){b=a(b);var q=b.data("__COMPOSER_CONTEXT");if(!q&&r){q=k(b,r);b.data("__COMPOSER_CONTEXT",q)}return q},k=function(b,r){var q=a.extend({},a.fn.evolutionComposer.defaults,r||{});q={input:b,settings:q,plugins:a.map(q.plugins,function(o){return typeof o=="string"?a.fn.evolutionComposer.plugins[o]:o}),ranges:[],activePlugin:false};q.pluginContext=j(q);q.input.evolutionHighlight();c(q);return q},j=function(b){return{settings:b.settings,input:b.input,data:function(r,q){return typeof q!==
"undefined"?b.input.data(r,q):b.input.data(r)},val:function(r){return typeof r!=="undefined"?b.input.val(r):b.input.val()},release:function(){b.activePlugin.onDeactivate&&b.activePlugin.onDeactivate.call(b.input,b.pluginContext);b.activePlugin=false},caretPosition:function(){return f(b.input)},currentWord:function(r){r=a.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},r||{});var q=r.caretPosition||f(b.input),o="",p=a(b.input).val(),t="",v=0,w=q,u=0;if(q<p.length&&!(p[q]==="\n"||
p[q]==="\t")){t=p.substring(q);v=l(t);if(v<0)v=t.indexOf("\n");if(v<0)v=t.indexOf("\t");if(v<0)v=t.length;for(u=0;u<r.allowedWhiteSpaceAfterCaret;u++)if(v>0){var x=p.substring(q+v+1);nextWhiteSpaceIndex=l(x);nextWhiteSpaceIndex=nextWhiteSpaceIndex===-1?x.length:nextWhiteSpaceIndex;if(nextWhiteSpaceIndex>0)v+=nextWhiteSpaceIndex+1;else break}if(v>0){w=0;o+=t.substring(0,v)}}if(q>0&&!(p[q-1]==="\n"||p[q-1]==="\t")){t=p.substring(0,q);v=m(t);for(u=0;u<r.allowedWhiteSpaceBeforeCaret;u++)if(v>0){q=m(p.substring(0,
v));if(q!==v)v=q;else break}if(v===t.length)v=t.lastIndexOf("\n");if(v===t.length)v=t.lastIndexOf("\t");if(v===t.length)v=t.length-1;if(v<t.length-1){w=v+1;o=t.substring(w)+o}}return{value:o,start:w,stop:w+o.length}},replace:function(r,q,o){var p=b.input.val();b.input.val(p.substring(0,r)+o+p.substring(q))},clearHighlights:function(r){var q=[];a.each(b.ranges,function(o,p){if(!r||p.className!==r)q.push(p)});b.ranges=q;b.input.evolutionHighlight({ranges:b.ranges})},addHighlight:function(r){b.ranges.push(r)},
renderHighlights:function(){b.input.evolutionHighlight({ranges:b.ranges})}}},c=function(b){b.input.bind({keypress:function(r){g(b,"onkeypress",r)},keydown:function(r){g(b,"onkeydown",r)},textinput:function(r){d(b,r);g(b,"oninput",r);n(b)}})},g=function(b,r,q){var o=true;if(b.activePlugin&&b.activePlugin[r])o=b.activePlugin[r].call(q.target,b.pluginContext,q);if(o){if(b[r])(o=b[r].call(q.target,q))||q.preventDefault()}else q.preventDefault()},d=function(b){b.activePlugin||a.each(b.plugins,function(r,
q){if(q.shouldActivate&&q.shouldActivate.call(b.input,b.pluginContext)===true){b.activePlugin=q;q.onActivate&&q.onActivate.call(b.input,b.pluginContext);return false}})},n=function(b){a.each(b.plugins,function(r,q){q.onTransform&&q.onTransform.call(b.input,b.pluginContext)})},l=function(b){var r=[];a.each([" ","\t","\n"],function(q,o){var p=b.indexOf(o);p>=0&&r.push(p)});r.sort();return r.length>0?r[0]:-1},m=function(b){var r=[];a.each([" ","\t","\n"],function(q,o){var p=b.lastIndexOf(o);p>=0&&r.push(p)});
r.sort();return r.length>0?r[r.length-1]:-1},f=function(b){b=b.get(0);if(b.selectionStart)return b.selectionStart;else if(document.selection){var r=document.selection.createRange();if(r===null)return 0;b=b.createTextRange();var q=b.duplicate();b.moveToBookmark(r.getBookmark());q.setEndPoint("EndToStart",b);return q.text.length}return 0},h=function(b){typeof a.fn.evolutionResize!=="undefined"&&b.input.evolutionResize().bind("evolutionResize",function(){b.input.evolutionHighlight("resize",b.input.width(),
b.input.height())})},e={init:function(b){return this.filter("textarea").each(function(){var r=a(this),q=s(r,b);h(q);q!==null&&a.each(q.plugins,function(o,p){p.init&&p.init.call(r,q.pluginContext)});setTimeout(function(){r.focus()},10)})},val:function(b){if(typeof b!=="undefined"){var r=s(this);if(r){r.input.val(b);n(r)}}else{r=s(this);var q="";if(r){q=r.input.val();a.each(r.plugins,function(o,p){if(p.val)q=p.val.call(r.input,q,r.pluginContext)})}return q}return this},onkeydown:function(b){var r=s(this);
if(r)r.onkeydown=b;return this},oninput:function(b){var r=s(this);if(r)r.oninput=b;return this},resize:function(b,r){var q=s(this);q&&q.input.evolutionHighlight("resize",b,r);return this}};a.fn.evolutionComposer=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return e.init.apply(this,arguments);else a.error("Method "+b+" does not exist on jQuery.evolutionComposer")};a.fn.evolutionComposer.defaults={plugins:[]};a.fn.evolutionComposer.plugins=
{}})(jQuery);
(function(a){var s=function(){var j=null,c={},g=function(b){var r=b.data("_tagged_tags");if(typeof r==="undefined"||r===null){r=[];b.data("_tagged_tags",r)}return r},d=function(b,r,q,o,p){var t=g(b);t[t.length]=r;if(q){var v=b.currentWord();b.replace(v.start,v.stop+1,r.decodedName+(o?" ":""))}r=v.start+(r.decodedName+(o?" ":"")).length;q=b.input.get(0);if(q.setSelectionRange)q.setSelectionRange(r,r);else if(q.createTextRange){q=q.createTextRange();q.collapse(true);q.moveEnd("character",r);q.moveStart("character",
r);q.select()}n(b);b.data("_hashtag_composer_active",false);k.hide();b.input.focus();p&&b.release()},n=function(b){var r=g(b).reverse(),q=b.val();b.clearHighlights(b.settings.highlightClass||m);var o={};a.each(r,function(p,t){if(t&&t.decodedName!==null&&t.decodedName.length>0){var v=q.indexOf(t.decodedName);if(v<0||o[v])r.splice(p,1);else for(;v>=0;){b.addHighlight({start:v,stop:t.decodedName.length+v,className:b.settings.highlightClass||m});o[v]=true;v=q.indexOf(t.decodedName,v+1)}}});b.renderHighlights()},
l=function(b){return b.length>2&&b.indexOf("#")===0&&!j.test(b.substr(1))&&isNaN(parseInt(b[1],10))},m="composer-hashtag-highlight",f=function(){},h=null;j=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i");for(var e=0;e<33;e++)c["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(e)]=true;return{init:function(b){f=b.settings.onTagList||a.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;b.input.bind(k.selectedEventName,function(){d(b,k.selection(),true,true,true)});
b.input.bind("blur",function(){setTimeout(function(){b.release()},500)})},onTransform:function(b){n(b)},shouldActivate:function(b){return l(b.currentWord().value)},onActivate:function(b){b.data("_hashtag_composer_active",true);a(document).bind("click.ui-composer-hashtags",function(){b.release();a(document).unbind(".ui-composer-hashtags")})},onDeactivate:function(b){var r=b.currentWord();l(r.value)&&d(b,{decodedName:r.value,name:r.value,token:"[tag:"+r.value.substr(1)+"]"},true,false,false);b.data("_hashtag_composer_active",
false);k.hide();b.input.focus()},val:function(b,r){var q=g(r);a.each(q,function(o,p){b=b.replace(RegExp(a.telligent.evolution.regex.encode(p.decodedName),"g"),p.token)});return b},onkeydown:function(b,r){if(r.which===27||r.which===32)b.release();else if(r.which===13||r.which===9){var q=k.selection();if(q){d(b,q,true,true,true);return false}else b.release()}else if(r.which===38){k.moveHighlightUp();return false}else if(r.which===40){k.moveHighlightDown();return false}return true},onkeypress:function(b,
r){typeof c[r.which]!=="undefined"&&b.release();return true},oninput:function(b){if(!l(b.currentWord().value)){b.release();return true}clearTimeout(h);k.loading(b.input);h=setTimeout(function(){var r=b.currentWord().value;if(l(r))r.length>=2&&f(r.substr(1),function(q){if(b.data("_hashtag_composer_active")){if(q)q=a.map(q,function(p){return{name:p.name,token:p.token,decodedName:a.telligent.evolution.html.decode(p.name)}});var o=b.currentWord().value;o==r&&l(o)&&q!==null&&q.length>0?k.show(b.input,
q,r):k.hide()}});else b.release()},500);return true}}}(),k=function(){var j=null,c=null,g=null,d=function(m){c=m;if(j===null){j=a('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(a("body"));g=a('<li class="loading">...</li>');var f=0,h=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){f+=1;if(f===3)f=0;g.get(0).innerHTML=h[f]},175);j.delegate("li","click",function(){if(c!==null){j.find("li.highlight").removeClass("highlight");
a(this).addClass("highlight");c.trigger(l.selectedEventName)}})}},n=function(){if(c!==null){var m=c.offset(),f=a(c);j.css({width:f.outerWidth()-2,top:m.top+f.outerHeight()-1,left:m.left})}},l={selectedEventName:"HASHTAG_SELECTED",show:function(m,f,h){d(m);n();j.hide().empty();var e=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(h)),"i");a.each(f,function(b,r){var q=r.name.match(e);q=q!==null?a("<li>"+r.name.replace(e,"<strong>"+q[0]+"</strong>")+"</li>"):a("<li>"+r.name+
"</li>");q.data("tagData",r);j.append(q)});j.show()},hide:function(){j!==null&&j.hide().empty()},loading:function(m){d(m);n();j.hide().empty().append(g).show()},moveHighlightUp:function(){var m=j.find("li");if(m.length!==0){var f=m.length;a.each(m,function(h,e){if(a(e).hasClass("highlight")){f=h;a(e).removeClass("highlight")}});if(f-1<0)f=m.length;a(m.get(f-1)).addClass("highlight")}},moveHighlightDown:function(){var m=j.find("li");if(m.length!==0){var f=-1;a.each(m,function(h,e){if(a(e).hasClass("highlight")){f=
h;a(e).removeClass("highlight")}});if(f+1>=m.length)f=-1;a(m.get(f+1)).addClass("highlight")}},selection:function(){var m=j.find("li");if(m.length===0)return null;var f=m.filter("li.highlight");return f!==null&&f.length>0?f.data("tagData"):a(m.get(0)).data("tagData")}};return l}();a.fn.evolutionComposer.plugins.hashtags=s;a.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(j,c){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",
data:{QueryText:j,PageSize:5},cache:false,dataType:"json",success:function(g){if(g.HashTags&&g.HashTags.length>0){g=a.map(g.HashTags,function(d){return{name:d.PreviewHtml,token:d.Token}});c(g)}else c(null)}})}}})(jQuery,window);
(function(a){var s=function(){var j={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;getMentions=function(c){var g=c.data("_mentioned_mentionables");if(typeof g==="undefined"||g===null){g=[];c.data("_mentioned_mentionables",g)}return g};setCursorPosition=function(c,g){var d=c.input.get(0);if(d.setSelectionRange)d.setSelectionRange(g,g);else if(d.createTextRange){d=d.createTextRange();d.collapse(true);d.moveEnd("character",g);d.moveStart("character",g);d.select()}};
mentionMentionable=function(c,g){var d=getMentions(c);d[d.length]=g;c.release();d=effectiveCurrentWord(c);c.replace(d.start,d.stop+1,g.decodedName+" ");updateHighlights(c);allowedSpaces(c,0);setCursorPosition(c,d.start+(g.decodedName+" ").length)};updateHighlights=function(c){var g=getMentions(c),d=c.val();c.clearHighlights(c.settings.highlightClass||mentionHighlightClass);a.each(g,function(n,l){if(l&&l.decodedName!==null&&l.decodedName.length>0){var m=d.indexOf(l.decodedName);if(m<0)g.splice(n,1);
else for(;m>=0;){c.addHighlight({start:m,stop:l.decodedName.length+m,className:c.settings.highlightClass||mentionHighlightClass});m=d.indexOf(l.decodedName,m+1)}}});c.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getMentionablesTimeout=null;allowedSpaces=function(c,g){if(typeof g!=="undefined"){c.data("_allowed_spaces",g);return g}else return c.data("_allowed_spaces")||0};effectiveCurrentWord=function(c){var g=c.val().substring(0,caretPosition),
d=null;a.each(j,function(l,m){if(m!==null&&m.length>0&&g.match("@"+a.telligent.evolution.regex.encode(l)+"$")){d="@"+l;return false}});if(d!==null){var n=g.length-d.length;allowedSpaces(c,d.split(" ").length-1);return{value:d,start:n,stop:n+d.length}}else return c.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(c)})};return{init:function(c){getMentionables=c.settings.onMentionableList||a.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;c.input.bind(k.selectedEventName,
function(){mentionMentionable(c,k.selection())});c.input.bind({blur:function(){setTimeout(function(){c.release()},500)},keydown:function(){caretPosition=c.caretPosition()+1}})},onTransform:function(c){updateHighlights(c)},shouldActivate:function(c){return effectiveCurrentWord(c).value.indexOf("@")===0},onActivate:function(c){c.data(isActiveKey,true);a(document).bind("click.mentions",function(){c.release();a(document).unbind(".mentions")})},onDeactivate:function(c){c.data(isActiveKey,false);k.hide();
c.input.focus();allowedSpaces(c,0)},val:function(c,g){var d=getMentions(g);a.each(d,function(n,l){c=c.replace(l.decodedName,l.token)});return c},onkeydown:function(c,g){if(g.which===32)allowedSpaces(c,allowedSpaces(c)+1);else if(g.which===27){c.release();return false}else if(g.which===13||g.which===9){var d=k.selection();d?mentionMentionable(c,d):c.release();return false}else if(g.which===38){k.moveHighlightUp();return false}else if(g.which===40){k.moveHighlightDown();return false}return true},onkeypress:function(){return true},
oninput:function(c){clearTimeout(getMentionablesTimeout);k.loading(c.input);getMentionablesTimeout=setTimeout(function(){var g=effectiveCurrentWord(c).value.substring(1);if(g.length>1){var d=function(n){n!==null&&n.length>0?k.show(c.input,n,g):c.release()};if(typeof j[g]!=="undefined")c.data(isActiveKey)&&d(j[g]);else getMentionables(g,function(n){if(c.data(isActiveKey)){if(n)n=a.map(n,function(l){return{name:l.name,token:l.token,decodedName:a.telligent.evolution.html.decode(l.name)}});j[g]=n;effectiveCurrentWord(c).value.substring(1)==
g&&d(n)}})}else c.release()},500);return true}}}(),k=function(){var j=null,c=null,g=null,d=function(m){c=m;if(j===null){j=a('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(a("body"));g=a('<li class="loading">...</li>');var f=0,h=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){f+=1;if(f===3)f=0;g.get(0).innerHTML=h[f]},175);j.delegate("li","click",function(){if(c!==null){j.find("li.highlight").removeClass("highlight");
a(this).addClass("highlight");c.trigger(l.selectedEventName)}})}},n=function(){if(c!==null){var m=c.offset(),f=a(c);j.css({width:f.outerWidth()-2,top:m.top+f.outerHeight()-1,left:m.left})}},l={selectedEventName:"MENTIONABLE_SELECTED",show:function(m,f,h){d(m);n();j.hide().empty();var e=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(h)),"i");a.each(f,function(b,r){var q=r.name.match(e);q=q!==null?a("<li>"+r.name.replace(e,"<strong>"+q[0]+"</strong>")+"</li>"):a("<li>"+
r.name+"</li>");q.data("mentionableData",r);j.append(q)});j.show()},hide:function(){j!==null&&j.hide().empty()},loading:function(m){d(m);n();j.hide().empty().append(g).show()},moveHighlightUp:function(){var m=j.find("li");if(m.length!==0){var f=m.length;a.each(m,function(h,e){if(a(e).hasClass("highlight")){f=h;a(e).removeClass("highlight")}});if(f-1<0)f=m.length;a(m.get(f-1)).addClass("highlight")}},moveHighlightDown:function(){var m=j.find("li");if(m.length!==0){var f=-1;a.each(m,function(h,e){if(a(e).hasClass("highlight")){f=
h;a(e).removeClass("highlight")}});if(f+1>=m.length)f=-1;a(m.get(f+1)).addClass("highlight")}},selection:function(){var m=j.find("li");if(m.length===0)return null;var f=m.filter("li.highlight");return f!==null&&f.length>0?f.data("mentionableData"):a(m.get(0)).data("mentionableData")}};return l}();a.fn.evolutionComposer.plugins.mentions=s;a.fn.evolutionComposer.plugins.mentions.defaults={onMentionableList:function(j,c){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml",
data:{QueryText:j,PageSize:20},cache:false,dataType:"json",success:function(g){if(g.Mentionables&&g.Mentionables.length>0){g=a.map(g.Mentionables,function(d){return{name:d.PreviewHtml,token:d.Token}});c(g)}else c(null)}})}}})(jQuery,window);
(function(a){var s=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,k=function(){var j={init:function(c){c.highlighClassName=c.highlighClassName||j.defaults.highlighClassName},onTransform:function(c){var g;g=(c.val()||"").match(s);g=g!==null&&g.length>0?g[0]:null;if(g!==null){var d;d=c.data("_composer_urlpreview_data");if(d===null||typeof d==="undefined"){d={};c.data("_composer_urlpreview_data",d)}d=d;var n=c.val().indexOf(g);if(n>=0&&typeof d.lastRange==="undefined"||d.lastRange.start!==
n||d.lastRange.stop!==n+g.length){d.lastRange={start:n,stop:n+g.length};c.clearHighlights(c.highlighClassName);c.addHighlight({start:n,stop:n+g.length,className:c.highlighClassName});c.renderHighlights()}}else c.clearHighlights(c.highlighClassName)},shouldActivate:function(){return false},val:function(c){return c},onkeydown:function(){return true},oninput:function(){return true}};j.defaults={highlighClassName:"composer-url-highlight",loadingText:"..."};return j}();a.fn.evolutionComposer.plugins.urlhighlight=
k})(jQuery,window);
(function(a,s){if(typeof a.telligent==="undefined")a.telligent={};if(typeof a.telligent.evolution==="undefined")a.telligent.evolution={};var k={baseUrl:"",authorizationCookieName:"AuthorizationCookie",defaultErrorMessage:"An error occured while communicating with the server.",defaultMultiErrorMessagePrefix:"The following errors occured while communicating with the server:\t ",isRemote:false,remoteUrlEncodePattern:""},j=["RecordNotFound","BadRequest","Conflict","Unauthorized","Unknown"],c=function(l,
m){l.url&&l.data&&typeof l.data!=="string"&&a.each(l.data,function(b,r){var q=RegExp("{"+b+"}","gim");if(l.url.match(q)){l.url=l.url.replace(q,s.encodeURIComponent(r));delete l.data[b]}});if(k.isRemote&&k.remoteUrlEncodePattern&&l.url&&l.url.lastIndexOf("/~/")>-1)l.url=l.url.substr(0,l.url.lastIndexOf("/~/")+3)+l.url.substr(l.url.lastIndexOf("/~/")+3).replace(RegExp(k.remoteUrlEncodePattern,"gi"),function(b){return"_"+b.substr(1)});var f=l.beforeSend,h=l.error,e=a.extend({},k,l);a.extend(l,{type:m===
"GET"?m:"POST",beforeSend:function(b){typeof f!=="undefined"&&f(b);n(b);if(m==="PUT"||m==="DELETE")b.setRequestHeader("Rest-Method",m)},error:function(b,r,q){if(!(b.readyState===0||b.status===0)){r=e.defaultErrorMessage;var o=/(?:<|>)/g,p=null;try{var t=a.parseJSON(b.responseText);if(t&&t.Errors&&a.isArray(t.Errors)&&t.Errors.length>0){var v=[];a.each(t.Errors,function(x,y){var z=y.split(":",2);if(z.length===1)v.push(z[0].replace(o,""));else a.inArray(z[0],j)>=0&&v.push(z[1].replace(o,""))});if(v.length===
1||v.length>1&&typeof a.telligent.evolution.notifications==="undefined")r=v[0];else if(v.length>1){p=v[0];r=e.defaultMultiErrorMessagePrefix;r+="<ul>";a.each(v,function(x,y){r+="<li>"+y+"</li>"});r+="</ul>"}}if(r===null||a.trim(r)==="")r=e.defaultErrorMessage}catch(w){}if(typeof h!=="undefined")h(b,p||r,q);else try{a.telligent.evolution.notifications.show(r,{type:"error"})}catch(u){alert(p||r)}}}});return a.ajax(l)},g=function(){var l=(new Date).getTimezoneOffset();return function(m){var f=/\/Date\((\d+)(?:-(\d+))?\)\//,
h=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d{0,3}))?))([zZ]|([+\-])(((\d\d):(\d\d))|(\d\d\d\d)))?/,e=new Date;if(m===null||m==="")return e;else if((f=f.exec(m))!=null)return new Date(parseInt(f[1],10));else if((f=h.exec(m))!=null){m=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()];for(h=1;h<f.length&&h<8;h++)if(f[h]!=""&&f[h]!=void 0)m[h-1]=parseInt(f[h],10);m=new Date(m[0],m[1]-1,m[2],m[3],m[4],m[5],m[6]);
if(f[8]){var b,r;if(f[8]=="z"||f[8]=="Z"){b=0;r=1}else if(f[9]&&f[12]&&f[13]){b=parseInt(f[12],10)*60+parseInt(f[13],10);r=f[9]=="+"?1:-1}else if(f[9]&&f[10]){b=parseInt(f[10].substring(0,2),10)*60+parseInt(f[10].substring(2),10);r=f[9]=="+"?1:-1}m=new Date(m.getTime()+-1*(r*b+l)*6E4)}return m}throw"Invalid date format";}}(),d=function(l,m,f){for(l+="";l.length<m;)l=f+l;return l},n=function(l){var m=function(f){f=f+"=";for(var h=document.cookie.split(";"),e=0;e<h.length;e++){for(var b=h[e];b.charAt(0)==
" ";)b=b.substring(1,b.length);if(b.indexOf(f)==0)return b.substring(f.length,b.length)}return null}(k.authorizationCookieName);if(m!=null){l.setRequestHeader("Authorization-Code",m);l.setRequestHeader("Rest-Authorization-Code",m)}};a.extend(a.telligent.evolution,{get:function(l){return c(l,"GET")},post:function(l){return c(l,"POST")},put:function(l){return c(l,"PUT")},del:function(l){return c(l,"DELETE")},formatDate:function(l){var m;a:{try{m=[d(l.getFullYear(),4,"0"),"-",d(l.getMonth()+1,2,"0"),
"-",d(l.getDate(),2,"0"),"T",d(l.getHours(),2,"0"),":",d(l.getMinutes(),2,"0"),":",d(l.getSeconds(),2,"0")].join("");break a}catch(f){}m=""}return m},parseDate:function(l){return g(l)},writeAuthorizationHeader:function(l){return n(l)}});a.telligent.evolution.site={configure:function(l){k=a.extend({},k,l);a.fn.glowDateTimeSelector&&a.extend(a.fn.glowDateTimeSelector.defaults,{monthNames:k.monthNames,dayNames:k.dayNames,calendarButtonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DateTimeSelectorCalendar.gif"});
if(a.glowModal){a.extend(a.glowModal.defaults,{loadingHtmlUrl:a.telligent.evolution.site.getBaseUrl()+"utility/loading.htm",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:200001});
s.Telligent_Modal={GetWindowOpener:function(m,f){return a.glowModal.opener(m,f)},IsShown:function(m){return a.glowModal.visible(m)},Resize:function(m,f,h,e){a.glowModal.resize(m,f,h,e)},MoveTo:function(m,f,h){a.glowModal.moveTo(m,f,h)},Open:function(m,f,h,e,b,r,q,o,p){a.glowModal(m,{width:f,height:h,onClose:e,x:b,y:r,ignoreCloseAndAnimation:q,isManuallyresized:o,openerWindow:p})},Close:function(m,f){a.glowModal.close(m,f)},Refresh:function(m){a.glowModal.refresh(m)}}}a.fn.glowDropDownList&&a.extend(a.fn.glowDropDownList.defaults,
{buttonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});a.fn.glowColorSelector&&a.extend(a.fn.glowColorSelector.defaults,{blendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",hueBlendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png"});if(a.fn.glowMultiUpload)a.extend(a.fn.glowMultiUpload.defaults,{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",
silverlightUrl:k.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:k.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"});if(a.fn.glowUpload)a.extend(a.fn.glowUpload.defaults,{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:k.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:k.silverlightFileUploadEnabled?
"html5,silverlight,flash":"html5,flash"})},getBaseUrl:function(){return k.baseUrl}}})(jQuery,window);if(typeof TelligentUtility=="undefined")var TelligentUtility={};TelligentUtility.WriteAuthorizationHeader=function(a){$.telligent.evolution.writeAuthorizationHeader(a)};
(function(a,s,k){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var j={groups:{}},c=function(l,m,f){if(l.isSaving)if(m+1<l.widgets.length){var h=l.widgets[m+1];if(h.save){h=h.save(function(){c(l,m+1,f)},function(){g(l,m+1,f)});if(h===false)g(l,m+1,f);else h===true&&c(l,m+1,f)}else c(l,m+1,f)}else if(f.success){l.isSaving=false;f.success()}},g=function(l,m,f){if(l.isSaving){l.isSaving=false;f.error&&f.error()}},d=function(l,m,f){if(l.isValidating){l.widgets[m].valid=
true;var h=0;a.each(l.widgets,function(e,b){b.valid!==true&&h++});if(h==0){l.isValidating=false;f.success&&f.success()}}},n=function(l,m,f){if(l.isValidating){l.widgets[m].valid=false;l.isValidating=false;f.error&&f.error()}};a.telligent.evolution.editableGroup={register:function(l,m){var f=j.groups[l];if(!f){f={widgets:[],isSaving:false,isValidating:false};j.groups[l]=f}f.widgets[f.widgets.length]=a.extend({},m||{},{valid:false,saved:false})},save:function(l,m){a.telligent.evolution.editableGroup.validate(l,
{success:function(){var f=j.groups[l];if(f&&f.widgets.length>0){f.isSaving=true;c(f,-1,m)}else m&&m.success&&m.success()},error:function(){m.error&&m.error()}})},validate:function(l,m){var f=j.groups[l];if(f&&f.widgets.length>0){a.each(f.widgets,function(h,e){e.valid=k});f.isValidating=true;a.each(f.widgets,function(h,e){if(e.validate){var b=e.validate(function(){d(f,h,m)},function(){n(f,h,m)});if(b===false)n(f,h,m);else b===true&&d(f,h,m)}else d(f,h,m)})}else m&&m.success&&m.success()}}})(jQuery,
window);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s=function(k,j){j<0||(j>0&&k.subscriptionId!=""&&(k.context==""||k.contextId==="undefined")?_showMessage(k,k.errorMessage):a.telligent.evolution.post({url:k.emailDigestUrl,data:{subscriptionId:k.subscriptionId,frequency:j,context:k.context,contextId:k.contextId},success:function(c){c=eval("("+c+")");var g=null;if(c.action=="create"){k.subscriptionId=c.subscriptionId;k.frequency=j;if(j==1)g=k.dailyMessage;else if(j==
7)g=k.weeklyMessage}else if(c.action=="update"){k.frequency=j;if(j==1)g=k.dailyMessage;else if(j==7)g=k.weeklyMessage}else if(c.action=="delete"){k.subscriptionId="";k.frequency=0;if(k.context=="group")g=k.unsubscribeGroupMessage}if(c.warnings&&c.warnings.length>0)_showMessage(k,c.warnings[0],"warning");else g&&_showMessage(k,g,"success");c={subscriptionId:k.subscriptionId,frequency:k.frequency,context:k.context,contextId:k.contextId,action:c.action};a(document).trigger("emailDigestSubscriptionChange",
[c])},error:function(){_showMessage(k,k.errorMessage,"error")}}))};_showMessage=function(k,j,c){a.telligent.evolution.notifications.show(j,{type:c,duration:5E3})};a.telligent.evolution.emailDigest={register:function(k){a("#"+k.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:true});a("#"+k.rollupWrapperId).click(function(){var j=a(this),c="",g="",d="";if(k.frequency==1)c="email-digest-selected";else if(k.frequency==7)g="email-digest-selected";else d=
"email-digest-selected";var n=j.outerWidth(),l=j.outerHeight();j=j.offset();c="<div class='email-digest-selectWrapper' style=\"min-width: "+(n-2)+'px;"><div frequency="1" class="email-digest-selectable '+k.selectableTag+" "+c+'"><span style="display: block; white-space: nowrap;">'+k.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+k.selectableTag+" "+g+'"><span style="display: block; white-space: nowrap;">'+k.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+
k.selectableTag+" "+d+'"><span style="display: block; white-space: nowrap;">'+k.popupUnsubscribe+"</span></div></div>";a("#"+k.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",c).glowPopUpPanel("show",j.left+4,j.top+5,n,l-10,false)});a("."+k.selectableTag).live("click",function(){var j=a(this);if(!j.hasClass("email-digest-selected")){j=j.attr("frequency");s(k,j)}});a(document).bind("emailDigestSubscriptionChange",function(j,c){if(!(c.context!=k.context||c.contextId!=k.contextId)){var g=
"";if(c.action=="create"||c.action=="update"){if(c.frequency=="1")g=k.rollupDaily;else if(c.frequency=="7")g=k.rollupWeekly;k.subscriptionId=c.subscriptionId}else{g=k.rollupUnsubscribed;k.subscriptionId=""}k.frequency=c.frequency;a("#"+k.rollupTextId).html(g)}})}}})(jQuery);
(function(a,s){var k="onhashchange"in s&&(document.documentMode===undefined||document.documentMode>7),j=s.location.href,c=a(s),g;if(!k)a.event.special.hashchange={setup:function(){g||(g=setInterval(function(){if(s.location.href!==j){j=s.location.href;c.trigger("hashchange")}},a.hashChangeSettings.interval))}};a.hashChangeSettings={interval:10}})(jQuery,window);
(function(a){var s=function(n,l){var m=n.data("_HIGHLIGHTER_CONTEXT");if(typeof m==="undefined"||m===null){m={selection:n.filter("textarea"),settings:a.extend({},a.fn.evolutionHighlight.defaults,l||{})};k(m);m=m;n.data("_HIGHLIGHTER_CONTEXT",m)}return m},k=function(n){n.wrapper=a("<div></div>");n.mirror=a("<div></div>");var l={position:"relative",width:n.selection.outerWidth(),height:n.selection.outerHeight()};a.each(["margin-left","margin-right","margin-top","margin-bottom"],function(h,e){l[e]=n.selection.css(e);
n.selection.css(e,0)});var m={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:n.selection.css("backgroundColor"),color:"transparent",width:n.selection.width(),height:n.selection.height(),overflow:"hidden",whiteSpace:"normal"};a.each(n.settings.styles,function(h,e){m[e]=n.selection.css(e)});var f={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",
width:n.selection.width(),height:n.selection.height()};n.wrapper.css(l).addClass("highlighter");n.mirror.css(m);n.selection.css(f);n.mirror.css("color",n.mirror.css("background-color"));n.selection.before(n.wrapper);n.wrapper.append(n.selection);n.wrapper.append(n.mirror)},j=/\s\s/gi,c=/\n/gi,g=function(n){var l={};a.each(n.settings.ranges,function(e,b){l[b.start]=l[b.start]||[];l[b.start].push(b);l[b.stop]=l[b.stop]||[];l[b.stop].push(b)});var m=a.telligent.evolution.html.encode(n.selection.val()||
"");newValue=[];for(var f=spanDepth=0;f<m.length;f++){typeof l[f]!=="undefined"&&a.each(l[f],function(e,b){if(b.start===f){newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;">';spanDepth++}else{newValue[newValue.length]="</span>";spanDepth--}});newValue[newValue.length]=m.charAt(f)}if(spanDepth>0)newValue[newValue.length]="</span>";m=newValue.join("").replace(c,"<br />").replace(j,"&nbsp; ");var h=document.createElement("span");h.innerHTML=m;n.mirror.empty().get(0).appendChild(h)},
d={init:function(n){var l=s(this,n);l.settings=a.extend({},a.fn.evolutionHighlight.defaults,n||{});g(l);return this},clear:function(){var n=s(this,null);if(n!==null){n.mirror.html("");return this}},resize:function(n,l){var m=s(this,null);if(m!==null){var f={width:n,height:l};m.mirror.css(f);m.selection.css(f);m.wrapper.css({width:m.selection.outerWidth(),height:m.selection.outerHeight()});return this}},css:function(n){var l=s(this,null);if(l!==null){l.wrapper.css(n);return this}}};a.fn.evolutionHighlight=
function(n){if(d[n])return d[n].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof n==="object"||!n)return d.init.apply(this,arguments);else a.error("Method "+n+" does not exist on jQuery.evolutionHighlight")};a.fn.evolutionHighlight.defaults={ranges:[],styles:["border-top-width","border-top-style","border-bottom-width","border-bottom-style","border-right-width","border-right-width-value","border-right-style","border-right-style-value","border-left-width","border-left-width-value",
"border-left-style","border-left-style-value","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","padding-bottom","padding-left","padding-right","padding-top","letter-spacing","line-height","text-align","text-indent","word-spacing"]}})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.html={encode:function(s){if(!s)return s;return a("<div/>").text(s).html()},decode:function(s){if(!s)return s;s=s.replace(/<[^>]*>/g," ");return a("<div/>").html(s).text()}}})(jQuery,window);
(function(a){var s={},k=function(g,d){if(g.internal.isInitialized){for(var n=d.split(/[,;]/g),l=[],m=0;m<n.length;m++){var f=a.trim(n[m]);if(f)l[l.length]=f}g.settings.onSave(l,function(){g.settings.currentTags=l})}},j=function(g){return this.each(function(){var d={settings:a.extend({},a.fn.evolutionInlineTagEditor.defaults,g||{}),internal:{state:a(this)}};a(this).data("evolutionTagInlineEditor_context",d);a(this).html()||a(this).text(d.settings.editButtonText);c(d)})},c=function(g){var d=a("<div></div>").addClass(g.settings.editorCssClass).attr("style",
"display: none;"),n=a('<label for="tag-area"></label>').hide(),l=a('<textarea id="tag-area"></textarea>').attr("cols","40").attr("rows","2");if(g.settings.allTags&&g.settings.allTags.length>0)var m=a('<input type="button" />').val(g.settings.selectTagsText);var f=a('<input type="button" />').val(g.settings.saveTagsText),h=a('<input type="button" />').val(g.settings.cancelText),e=a('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');
e.find("td:eq(1)").append(f);e.find("td:eq(1)").append(h);m&&e.find("td:first").append(m);d.append(n);d.append(l);d.append(e);l.evolutionTagTextBox({allTags:g.settings.allTags});d.glowPopUpPanel({cssClass:g.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:false});a(g.internal.state).bind("click.evolutionInlineTagEditor",function(){d.glowPopUpPanel("hide").glowPopUpPanel("show",a(this));l.val(g.settings.currentTags.length>0?g.settings.currentTags.join(", "):"");return false});
f.bind("click.evolutionInlineTagEditor",function(){k(g,l.attr("value"));d.glowPopUpPanel("hide");return false});h.bind("click.evolutionInlineTagEditor",function(){d.glowPopUpPanel("hide");return false});m&&m.bind("click.evolutionInlineTagEditor",function(){l.evolutionTagTextBox("openTagSelector");return false});g.internal.state.after(d);g.internal.isInitialized=true};a.fn.evolutionInlineTagEditor=function(g){if(g in s)return s[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g===
"object"||!g)return j.apply(this,arguments);else a.error("Method "+g+" does not exist on jQuery.fn.evolutionInlineTagEditor")};a.extend(a.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(){}}})})(jQuery);if(typeof JSON!=="object")JSON={};
(function(){function a(m){return m<10?"0"+m:m}function s(m){c.lastIndex=0;return c.test(m)?'"'+m.replace(c,function(f){var h=n[f];return typeof h==="string"?h:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+m+'"'}function k(m,f){var h,e,b,r,q=g,o,p=f[m];if(p&&typeof p==="object"&&typeof p.toJSON==="function")p=p.toJSON(m);if(typeof l==="function")p=l.call(f,m,p);switch(typeof p){case "string":return s(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";g+=d;o=[];if(Object.prototype.toString.apply(p)==="[object Array]"){r=p.length;for(h=0;h<r;h+=1)o[h]=k(h,p)||"null";b=o.length===0?"[]":g?"[\n"+g+o.join(",\n"+g)+"\n"+q+"]":"["+o.join(",")+"]";g=q;return b}if(l&&typeof l==="object"){r=l.length;for(h=0;h<r;h+=1)if(typeof l[h]==="string"){e=l[h];if(b=k(e,p))o.push(s(e)+(g?": ":":")+b)}}else for(e in p)if(Object.prototype.hasOwnProperty.call(p,e))if(b=k(e,p))o.push(s(e)+(g?": ":":")+b);b=o.length===0?"{}":g?"{\n"+g+o.join(",\n"+
g)+"\n"+q+"}":"{"+o.join(",")+"}";g=q;return b}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,d,n={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof JSON.stringify!=="function")JSON.stringify=function(m,f,h){var e;d=g="";if(typeof h==="number")for(e=0;e<h;e+=1)d+=" ";else if(typeof h==="string")d=h;if((l=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw Error("JSON.stringify");return k("",
{"":m})};if(typeof JSON.parse!=="function")JSON.parse=function(m,f){function h(b,r){var q,o,p=b[r];if(p&&typeof p==="object")for(q in p)if(Object.prototype.hasOwnProperty.call(p,q)){o=h(p,q);if(o!==undefined)p[q]=o;else delete p[q]}return f.call(b,r,p)}var e;m=String(m);j.lastIndex=0;if(j.test(m))m=m.replace(j,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(m.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){e=eval("("+m+")");return typeof f==="function"?h({"":e},""):e}throw new SyntaxError("JSON.parse");}})();
(function(a){var s={},k=function(c,g,d){var n=s[c.toString()+"-"+g];typeof n==="undefined"?a.telligent.evolution.get({url:j.defaults.dateEndpoint,data:{date:a.telligent.evolution.formatDate(c),format:g},success:function(l){if(l&&d&&typeof l!=="undefined"&&l!==null&&l.formattedDate){s[c.toString()+"-"+g]=l.formattedDate;d(l.formattedDate)}}}):d(n)},j={formatDate:function(c,g){k(c,"date",g)},formatDateAndTime:function(c,g){k(c,"datetime",g)},formatAgoDate:function(c,g){k(c,"agodate",g)}};j.defaults=
{dateEndpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.language=j})(jQuery);
(function(a){var s=false,k=function(d){var n=d.settings.format;if(d.hasCount)n=n.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>');if(d.hasToggle)n=n.replace(/\{toggle\}/gi,'<span class="like-toggle"><a href="#" class="internal-link"></a></span>');if(d.hasMessage)n=n.replace(/\{message\}/gi,'<span class="like-message"></span>');d.element.html(n);if(d.hasCount){d.countWrapper=d.element.find("span.like-count");d.countWrapper.html(d.settings.initialCount)}if(d.hasToggle){d.toggleLink=
d.element.find("span.like-toggle a");d.toggleLink.evolutionToggleLink({onHtml:"<span></span>"+d.settings.unlikeText,offHtml:"<span></span>"+d.settings.likeText,onTitle:"",offTitle:"",processingHtml:"<span></span>...",changeState:function(l){c(l,d)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:d.settings.initialState==="true"})}if(d.hasMessage){d.messageWrapper=d.element.find("span.like-message");d.messageWrapper.html(d.settings.initialMessage)}},
j=function(d,n,l){var m="";if(n.count>0){var f=0;if(l)if(n.count===1)m=d.settings.whoLikesAccessingText;else if(n.count===2){m=d.settings.whoLikesAccessingTwoText;f=-1}else{if(n.count>2){m=d.settings.whoLikesAccessingMultipleText;f=-1}}else if(n.count===1)m=d.settings.whoLikesOtherText;else if(n.count===2){f=-1;m=d.settings.whoLikesOtherTwoText}else if(n.count>2){f=-1;m=d.settings.whoLikesOtherMultipleText}m=m.replace(/\{count\}/gi,n.count+f);m=m.replace(/\{user_profile_url\}/gi,n.latestLike.User.ProfileUrl);
m=m.replace(/\{user_display_name\}/gi,n.latestLike.User.DisplayName)}a.telligent.evolution.messaging.publish("ui.like",{contentId:d.settings.contentId,contentTypeId:d.settings.contentTypeId,typeId:d.settings.typeId,count:n.count,liked:l,message:m})},c=function(d,n){d?n.settings.onLike(n.settings.contentId,n.settings.contentTypeId,n.settings.typeId,function(l){j(n,l,true)}):n.settings.onUnlike(n.settings.contentId,n.settings.contentTypeId,n.settings.typeId,function(l){j(n,l,false)})},g=function(d){a.telligent.evolution.messaging.subscribe("ui.like",
function(n){if(n.contentId===d.settings.contentId&&n.contentTypeId===d.settings.contentTypeId&&n.typeId===d.settings.typeId){d.hasToggle&&d.toggleLink.evolutionToggleLink("val",n.liked);d.hasCount&&d.countWrapper.html(n.count);d.hasMessage&&d.messageWrapper.html(n.message)}})};a.fn.evolutionLike=function(d){var n=a.extend({},a.fn.evolutionLike.defaults,d||{});return this.each(function(){var l={element:a(this),settings:n,hasCount:n.format.indexOf("{count}")>=0,hasToggle:n.format.indexOf("{toggle}")>=
0,hasMessage:n.format.indexOf("{message}")>=0};k(l);g(l)})};a.fn.evolutionLike.delegatePopups=function(d){if(!s){s=true;var n=a.extend({},a.fn.evolutionLike.defaults,d||{}),l=a.telligent.evolution.template.compile(n.likersTemplate),m=a.telligent.evolution.template.compile(n.likersPopupTemplate),f=function(e,b,r){n.onList(e.contentId,e.contentTypeId,e.typeId,function(q){r(q)},e.pageSize,b)},h=function(e,b){var r=0,q=a(l(e)),o=a(m({likers:q,hasMorePages:e.hasMorePages,showMoreText:n.modalShowMoreText})),
p=o.find("ul"),t=o.find(".show-more"),v=n.onOptions(a(b).closest(n.delegatedSelector));p.html(q);t.on("click",function(w){w.preventDefault();r++;f(v,r,function(u){p.append(l(u));u.hasMorePages?t.show():t.hide();p.scrollTop(p[0].scrollHeight)})});a.glowModal({title:n.modalTitleText,html:o,width:450})};(function(){a(n.containerSelector).on("click",n.delegatedSelector+" .who-likes",function(){var e=a(this),b=n.onOptions(a(e).closest(n.delegatedSelector));f(b,0,function(r){h(r,e)})})})()}};a.fn.evolutionLike.defaults=
{contentId:"",contentTypeId:"",typeId:"",initialState:false,initialMessage:"",initialCount:0,format:"",onLike:function(){},onUnlike:function(){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',
whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(){},onOptions:function(){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '}})(jQuery);jQuery(function(a){a("textarea[maxlength]").live("keyup change",function(){var s=a(this),k=s.attr("maxlength"),j=s.val();j.length>k&&s.val(j.substr(0,k))})});
(function(a){var s=function(j,c,g){var d=a.extend({},k.defaults,g||{});j={url:j,view:c};if(d.width)j.width=d.width;if(d.height)j.height=d.height;a.telligent.evolution.get({url:d.endpoint,data:j,success:function(n){n&&d.success&&d.success(n)},error:function(n,l,m){d.error&&d.error(n,l,m)}})},k={previewHtml:function(j,c){s(j,"preview",c)},viewHtml:function(j,c){s(j,"view",c)}};k.defaults={endpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.media=
k})(jQuery);
(function(a){var s={},k={},j=0;if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.messaging={publish:function(c,g){if(!c)throw"messageName is required when publishing a message";if(!(c===null||c.length===0)){var d=s[c];d&&a.each(d,function(n,l){if(l.handler!==null)try{l.handler.call(this,g)}catch(m){}})}},subscribe:function(c,g){if(!c)throw"messageName is required when subscribing to a message";if(c===null||c.length===0)return 0;if(typeof s[c]==="undefined")s[c]=
[];var d={message:c,handler:g,id:j++};s[c][s[c].length]=d;k[String(d.id)]=d;return d.id},unsubscribe:function(c){if(!c)throw"subscriptionId is required when unsubscribing a message";if(typeof k[String(c)]!=="undefined"){var g=k[String(c)],d=-1,n=s[g.message];a.each(n,function(l,m){if(m===g)d=l});d>=0&&n.splice(d,1);n.length===0&&delete s[g.message];delete k[String(c)]}}}})(jQuery);
(function(a){var s=a.telligent.evolution,k=function(c){c.settings.onReport(c.settings.contentId,c.settings.contentTypeId,function(g){s.messaging.publish("ui.reportabuse",{contentId:c.settings.contentId,contentTypeId:c.settings.contentTypeId});showNotification(c,g.Report)})},j=function(c){if(c.hideTimer){clearTimeout(c.hideTimer);c.hideTimer=null}};buildModerationLink=function(c){c.moderationLink=a(s.template.compile(c.settings.moderationLinkTemplate)({linkClassName:c.settings.linkClassName,resources:{moderateLinkText:c.settings.moderateLinkText}})).appendTo(c.element)};
buildModerationPopup=function(c){c.popup=a("<div></div>").glowPopUpPanel({cssClass:"content-moderation",position:"downleft",zIndex:1E3,hideOnDocumentClick:true});c.popup.bind({glowPopUpPanelShown:function(){c.moderationLink.addClass("open")},glowPopUpPanelHidden:function(){c.moderationLink.removeClass("open")}})};buildModerationMenuContent=function(c,g){c.settings.onGetAdditionalLinks(function(d){var n=[];n=c.settings.supportsAbuse?c.settings.initialState?d.concat([{href:"#",className:"evolutionModerateFlagged",
text:c.settings.reportedLinkText}]):d.concat([{href:"#",className:"evolutionModerateFlag",text:c.settings.reportLinkText}]):d;d=a(s.template.compile(c.settings.moderationMenuTemplate)({links:n}));d.bind("mouseleave",function(){hideMenu(c)});d.bind("mouseenter",function(){j(c)});d.delegate("a","click",function(l){var m=a(l.target);if(m.hasClass("evolutionModerateFlag")){l.preventDefault();k(c)}else if(m.hasClass("evolutionModerateFlagged"))l.preventDefault();else{m.attr("href")==="#"&&l.preventDefault();
c.element.trigger("evolutionModerateLinkClicked",l.target)}});g(d)})};showMenu=function(c){c.popup||buildModerationPopup(c);buildModerationMenuContent(c,function(g){j(c);c.popup.glowPopUpPanel("html",g).glowPopUpPanel("show",c.moderationLink)})};hideMenu=function(c){if(!c.hideTimer)c.hideTimer=setTimeout(function(){c.popup.glowPopUpPanel("hide");c.hideTimer=null},200)};formatNotificationMessage=function(c,g){return c.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,g&&g.AuthorUser&&g.AuthorUser.DisplayName?
g.AuthorUser.DisplayName:"")};showNotification=function(c,g){var d=s.template.compile(c.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(c,g),undoLinkText:c.settings.undoLinkText},contextId:c.contextId});s.notifications.show(d,{type:"moderation",duration:c.settings.notificationDuration,cssClass:""})};handleFlagMessages=function(c){s.messaging.subscribe("ui.reportabuse",function(g){if(c.settings.contentId===g.contentId&&c.settings.contentTypeId===
g.contentTypeId)c.settings.initialState=true})};init=function(c){buildModerationLink(c);c.moderationLink.bind({mouseenter:function(g){g.preventDefault();c.popup&&c.popup.glowPopUpPanel("isShown")?hideMenu(c):showMenu(c);j(c)},mouseleave:function(g){!a(g.relatedTarget).is(".content-moderation")&&a(g.relatedTarget).closest(".content-moderation").length===0&&hideMenu(c)}});handleFlagMessages(c)};a.fn.evolutionModerate=function(c){var g=a.extend({},a.fn.evolutionModerate.defaults,c||{});return this.each(function(){var d=
{element:a(this),settings:g};init(d)})};a.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:false,linkClassName:"",onReport:function(){},onGetAdditionalLinks:function(c){c([])},notificationDuration:5E3,moderateLinkText:"moderate",supportsAbuse:true,reportLinkText:"Flag as spam/abuse",reportedLinkText:"Flagged as spam/abuse",reportedNotificationMessageText:"{NAME}'s post has been flagged. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',
moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"}})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s={message:"",enabled:false,ignoreClick:false},k=function(){if(!s.ignoreClick)return s.message};a.telligent.evolution.navigationConfirmation={configure:function(j){s=a.extend(s,j)},enable:function(){if(!s.enabled){window.onbeforeunload=k;s.enabled=true;a(document).bind("customizepage",function(){s.ignoreClick=true})}},register:function(j){a(j).click(function(){s.ignoreClick=true})},ignoreClick:function(){s.ignoreClick=
true}}})(jQuery);
(function(a,s){a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};var k={duration:9999,width:300,type:"directions",cssClass:"menu notification notification__menu"},j=null,c=null,g=300,d=false,n=function(){j&&j.glowPopUpPanel("isShown")&&j.glowPopUpPanel("show",(a(s).width()-g)/2,a(s).scrollTop(),g,0,true)};a.telligent.evolution.notifications={show:function(l,m){m=a.extend({},k,m||{});if(!j){j=a("<div></div>").glowPopUpPanel({cssClass:m.cssClass,position:"down",zIndex:1E4,
hideOnDocumentClick:false}).bind("glowPopUpPanelMouseOver",function(){d=true}).bind("glowPopUpPanelMouseOut",function(){d=false});a(s).bind("scroll",n)}s.clearTimeout(c);j.glowPopUpPanel("isShown")&&j.glowPopUpPanel("hide");g=m.width;j.glowPopUpPanel("html",'<div class="message '+m.type+'" style="width:'+m.width+'px">'+l+"</div>").glowPopUpPanel("show",(a(s).width()-m.width)/2,a(s).scrollTop(),m.width,0);c=s.setTimeout(function(){a.telligent.evolution.notifications.hide(m.callback)},m.duration)},
hide:function(l){if(j){s.clearTimeout(c);if(d)c=s.setTimeout(function(){a.telligent.evolution.notifications.hide(l)},249);else{j.glowPopUpPanel("hide");l&&typeof l==="function"&&l()}}}}})(jQuery,window);(function(a){a.telligent.evolution.messaging.subscribe("socket.connected",function(){a.telligent.evolution.sockets.notifications.on("received",function(s){a.telligent.evolution.messaging.publish("notification.raised",s)})})})(jQuery,window);
(function(a){var s={},k={},j={},c=function(h){var e=[],b=h.settings,r=function(p){var t={};t[b.pageKey]=p;p={url:b.baseUrl,query:t};if(b.hash&&b.hash.length>0)p[b.hash]=b.hash;return a.telligent.evolution.url.modify(p)};if(b.totalItems===0||b.pageSize===0)h=0;else{h=Math.floor(b.totalItems/b.pageSize);if(b.totalItems%b.pageSize>0)h+=1}if(h>1){if(b.showFirst)if(b.currentPage>=3&&h>b.numberOfPagesToDisplay)e[e.length]={type:"first",selected:false,page:1,url:r(1)};if(b.showPrevious)if(b.currentPage>
0)e[e.length]={type:"previous",selected:false,page:b.currentPage,url:r(b.currentPage)};if(b.showIndividualPages){var q;q=h<b.numberOfPagesToDisplay||b.currentPage-Math.floor(b.numberOfPagesToDisplay/2)<0?0:b.currentPage+Math.floor(b.numberOfPagesToDisplay/2)>=h?h-b.numberOfPagesToDisplay:b.currentPage-Math.floor(b.numberOfPagesToDisplay/2);var o;o=Math.floor(b.numberOfPagesToDisplay/2);if(b.numberOfPagesToDisplay%2===0)o-=1;o=h<b.numberOfPagesToDisplay||b.currentPage+o>=h?h-1:b.currentPage-Math.floor(b.numberOfPagesToDisplay/
2)<0?b.numberOfPagesToDisplay-1:b.currentPage+o;for(q=q;q<=o;q++)e[e.length]={type:"page",selected:b.currentPage===q,page:q+1,url:r(q+1)}}if(b.showNext)if(b.currentPage+1<h)e[e.length]={type:"next",selected:false,page:b.currentPage+2,url:r(b.currentPage+2)};if(b.showLast)if(b.currentPage+3<h&&h>b.numberOfPagesToDisplay)e[e.length]={type:"last",selected:false,page:h,url:r(h)}}return e},g=function(h){var e=h.template({links:h.links});h.selection.html(e)},d=function(h){var e=parseInt(a.telligent.evolution.url.hashData()[h.settings.pageKey],
10);if(!isNaN(e)&&e!==h.settings.currentPage)if(!j[h.settings.pageKey]){j[h.settings.pageKey]=true;h.settings.onPage(e,function(b){h.currentPageIndex=e;f(h,e,0,b,false)})}},n=function(h){a(h.selection).delegate("a","click",function(e){e.preventDefault();e=a(this);var b={};b[h.settings.pageKey]=e.data("page");a.telligent.evolution.url.hashData(b)})},l=function(h){if(!s[h.settings.pageKey]){s[h.settings.pageKey]=true;h.currentPageIndex=parseInt(a.telligent.evolution.url.hashData()[h.settings.pageKey],
10);if(isNaN(h.currentPageIndex))h.currentPageIndex=h.settings.currentPage;a(window).bind("hashchange",function(){var e=parseInt(a.telligent.evolution.url.hashData()[h.settings.pageKey],10);if(!isNaN(e))if(h.currentPageIndex!==e){h.newPageIndex=e;var b={currentPage:h.currentPageIndex,newPage:h.newPageIndex,container:h.settings.pagedContentContainer};a.telligent.evolution.messaging.publish(h.settings.pagedContentPagingEvent,b);h.selection.trigger("evolutionPagerPaging",b);h.currentPageIndex=e}})}},
m=function(h){if(k[h.settings.pagedContentPagingEvent]){h.currentPageIndex=parseInt(a.telligent.evolution.url.hashData()[h.settings.pageKey],10);a.telligent.evolution.messaging.unsubscribe(k[h.settings.pagedContentPagingEvent])}k[h.settings.pagedContentPagingEvent]=a.telligent.evolution.messaging.subscribe(h.settings.pagedContentPagingEvent,function(e){if(!j[h.settings.pageKey]){j[h.settings.pageKey]=true;h.settings.onPage(e.newPage,function(b){h.currentPageIndex=e.newPage;f(h,e.newPage,e.currentPage,
b,true)})}})},f=function(h,e,b,r,q){var o=function(){var p={page:e,container:h.settings.pagedContentContainer};a.telligent.evolution.messaging.publish(h.settings.pagedContentPagedEvent,p);h.selection.trigger("evolutionPagerPaged",p)};if(q&&(h.settings.transition==="slide"||h.settings.transition==="fade")){q="fade";if(h.settings.transition==="slide")q=e<b?"slideRight":"slideLeft";b=a(h.settings.pagedContentContainer);r=a("<div></div>").attr("id",b.attr("id")).html(r).hide().insertAfter(h.settings.pagedContentContainer);
b.glowTransition(r,{type:q,duration:h.settings.transitionDuration,complete:function(){a(h.settings.pagedContentContainer).css({width:"",height:"",overflow:"hidden"});o();j[h.settings.pageKey]=false}})}else{a(h.settings.pagedContentContainer).html(r);o();j[h.settings.pageKey]=false}h.settings.currentPage=e-1;h.links=c(h);g(h)};a.fn.evolutionPager=function(h){h=a.extend({},a.fn.evolutionPager.defaults,h||{});var e={selection:this,settings:h,template:a.telligent.evolution.template.compile(h.template)};
e.links=c(e);g(e);if(h.onPage&&h.pagedContentContainer&&h.pagedContentContainer.length>0){m(e);l(e);n(e);d(e)}return this};a.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:false,showNext:false,showFirst:true,showLast:true,showIndividualPages:true,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,
template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>     <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>     <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '}})(jQuery);
(function(){function a(){this.returnValue=false}function s(){this.cancelBubble=true}var k=0,j=[],c={},g={},d={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},n=/[<>&\"\']/g,l=window.setTimeout,m={},f;(function(e){e=e.split(/,/);var b,r,q;for(b=0;b<e.length;b+=2){q=e[b+1].split(/ /);for(r=0;r<q.length;r++)g[q[r]]=e[b]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var h={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:g,ua:function(){var e=navigator,b=e.userAgent,r=e.vendor,q,o;o=(q=/WebKit/.test(b))&&r.indexOf("Apple")!==-1;r=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,
ie:!q&&!r&&/MSIE/gi.test(b)&&/Explorer/gi.test(e.appName),webkit:q,gecko:!q&&/Gecko/.test(b),safari:o,opera:!!r}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){h.each(arguments,function(b,r){r>0&&h.each(b,function(q,o){e[o]=q})});return e},cleanName:function(e){var b,r;r=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,
"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<r.length;b+=2)e=e.replace(r[b],r[b+1]);e=e.replace(/\s+/g,"_");return e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,b){b.name=e;j[e]=b;j.push(b);return b},guid:function(){var e=(new Date).getTime().toString(32),b;for(b=0;b<5;b++)e+=Math.floor(Math.random()*65535).toString(32);return(h.guidPrefix||"p")+e+(k++).toString(32)},buildUrl:function(e,b){var r="";h.each(b,function(q,o){r+=(r?"&":"")+encodeURIComponent(o)+
"="+encodeURIComponent(q)});if(r)e+=(e.indexOf("?")>0?"&":"?")+r;return e},each:function(e,b){var r,q;if(e){r=e.length;if(r===void 0)for(q in e){if(e.hasOwnProperty(q))if(b(e[q],q)===false)break}else for(q=0;q<r;q++)if(b(e[q],q)===false)break}},formatSize:function(e){if(e===void 0||/\D/.test(e))return h.translate("N/A");if(e>1073741824)return Math.round(e/1073741824,1)+" GB";if(e>1048576)return Math.round(e/1048576,1)+" MB";if(e>1024)return Math.round(e/1024,1)+" KB";return e+" b"},getPos:function(e,
b){function r(v){var w,u=0;w=0;if(v){w=v.getBoundingClientRect();v=t.compatMode==="CSS1Compat"?t.documentElement:t.body;u=w.left+v.scrollLeft;w=w.top+v.scrollTop}return{x:u,y:w}}var q=0,o=0,p,t=document;e=e;b=b||t.body;if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&t.documentMode<8){q=r(e);o=r(b);return{x:q.x-o.x,y:q.y-o.y}}for(p=e;p&&p!=b&&p.nodeType;){q+=p.offsetLeft||0;o+=p.offsetTop||0;p=p.offsetParent}for(p=e.parentNode;p&&p!=b&&p.nodeType;){q-=p.scrollLeft||0;o-=p.scrollTop||
0;p=p.parentNode}return{x:q,y:o}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var b;if(typeof e=="string"){e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,""));b=e[2];e=+e[1];if(b=="g")e*=1073741824;if(b=="m")e*=1048576;if(b=="k")e*=1024}return e},xmlEncode:function(e){return e?(""+e).replace(n,function(b){return d[b]?"&"+d[b]+";":b}):e},toArray:function(e){var b,r=[];for(b=0;b<e.length;b++)r[b]=e[b];return r},
inArray:function(e,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,e);for(var r=0,q=b.length;r<q;r++)if(b[r]===e)return r}return-1},addI18n:function(e){return h.extend(c,e)},translate:function(e){return c[e]||e},isEmptyObj:function(e){if(e===void 0)return true;for(var b in e)return false;return true},hasClass:function(e,b){if(e.className=="")return false;return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(e.className)},addClass:function(e,b){if(!h.hasClass(e,b))e.className=e.className==
""?b:e.className.replace(/\s+$/,"")+" "+b},removeClass:function(e,b){e.className=e.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),function(r,q,o){return q===" "&&o===" "?" ":""})},getStyle:function(e,b){if(e.currentStyle)return e.currentStyle[b];else if(window.getComputedStyle)return window.getComputedStyle(e,null)[b]},addEvent:function(e,b,r,q){var o;b=b.toLowerCase();if(f===void 0)f="Plupload_"+h.guid();if(e.addEventListener){o=r;e.addEventListener(b,o,false)}else if(e.attachEvent){o=function(){var p=
window.event;if(!p.target)p.target=p.srcElement;p.preventDefault=a;p.stopPropagation=s;r(p)};e.attachEvent("on"+b,o)}if(e[f]===void 0)e[f]=h.guid();m.hasOwnProperty(e[f])||(m[e[f]]={});e=m[e[f]];e.hasOwnProperty(b)||(e[b]=[]);e[b].push({func:o,orig:r,key:q})},removeEvent:function(e,b,r){var q,o;if(typeof r=="function")q=r;else o=r;b=b.toLowerCase();if(e[f]&&m[e[f]]&&m[e[f]][b]){r=m[e[f]][b];for(var p=r.length-1;p>=0;p--)if(r[p].key===o||r[p].orig===q){if(e.removeEventListener)e.removeEventListener(b,
r[p].func,false);else e.detachEvent&&e.detachEvent("on"+b,r[p].func);r[p].orig=null;r[p].func=null;r.splice(p,1);if(q!==void 0)break}r.length||delete m[e[f]][b];if(h.isEmptyObj(m[e[f]])){delete m[e[f]];try{delete e[f]}catch(t){e[f]=void 0}}}},removeAllEvents:function(e,b){e[f]===void 0||!e[f]||h.each(m[e[f]],function(r,q){h.removeEvent(e,q,b)})}};h.Uploader=function(e){function b(){var w,u=0,x;if(this.state==h.STARTED){for(x=0;x<p.length;x++)if(!w&&p[x].status==h.QUEUED){w=p[x];w.status=h.UPLOADING;
this.trigger("BeforeUpload",w)&&this.trigger("UploadFile",w)}else u++;if(u==p.length){this.stop();this.trigger("UploadComplete",p)}}}function r(){var w,u;o.reset();for(w=0;w<p.length;w++){u=p[w];if(u.size!==void 0){o.size+=u.size;o.loaded+=u.loaded}else o.size=void 0;if(u.status==h.DONE)o.uploaded++;else if(u.status==h.FAILED)o.failed++;else o.queued++}if(o.size===void 0)o.percent=p.length>0?Math.ceil(o.uploaded/p.length*100):0;else{o.bytesPerSec=Math.ceil(o.loaded/((+new Date-t||1)/1E3));o.percent=
o.size>0?Math.ceil(o.loaded/o.size*100):0}}var q={},o,p=[],t,v=false;o=new h.QueueProgress;e=h.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},e);h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:p,settings:e,total:o,id:h.guid(),init:function(){function w(){var B=y[z++],C,E,D;if(B){C=B.getFeatures();if(E=u.settings.required_features){E=E.split(",");for(D=0;D<E.length;D++)if(!C[E[D]]){w();return}}B.init(u,function(H){if(H&&H.success){u.features=
C;u.runtime=B.name;u.trigger("Init",{runtime:B.name});u.trigger("PostInit");u.refresh()}else w()})}else u.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var u=this,x,y,z=0,A;typeof e.preinit=="function"?e.preinit(u):h.each(e.preinit,function(B,C){u.bind(C,B)});e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(e.url))e.url=e.page_url+e.url;e.chunk_size=h.parseSize(e.chunk_size);e.max_file_size=h.parseSize(e.max_file_size);
u.bind("FilesAdded",function(B,C){var E,D,H=0,G;if((E=e.filters)&&E.length){G=[];h.each(E,function(J){h.each(J.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?G.push("\\.*"):G.push("\\."+L.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})});G=RegExp(G.join("|")+"$","i")}for(E=0;E<C.length;E++){D=C[E];D.loaded=0;D.percent=0;D.status=h.QUEUED;if(G&&!G.test(D.name))B.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:D});
else if(D.size!==void 0&&D.size>e.max_file_size)B.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:D});else{p.push(D);H++}}if(H)l(function(){u.trigger("QueueChanged");u.refresh()},1);else return false});e.unique_names&&u.bind("UploadFile",function(B,C){var E=C.name.match(/\.([^.]+)$/),D="tmp";if(E)D=E[1];C.target_name=C.id+"."+D});u.bind("UploadProgress",function(B,C){C.percent=C.size>0?Math.ceil(C.loaded/C.size*100):100;r()});u.bind("StateChanged",function(B){if(B.state==
h.STARTED)t=+new Date;else if(B.state==h.STOPPED)for(x=B.files.length-1;x>=0;x--)if(B.files[x].status==h.UPLOADING){B.files[x].status=h.QUEUED;r()}});u.bind("QueueChanged",r);u.bind("Error",function(B,C){if(C.file){C.file.status=h.FAILED;r();B.state==h.STARTED&&l(function(){b.call(u)},1)}});u.bind("FileUploaded",function(B,C){C.status=h.DONE;C.loaded=C.size;B.trigger("UploadProgress",C);l(function(){b.call(u)},1)});if(e.runtimes){y=[];A=e.runtimes.split(/\s?,\s?/);for(x=0;x<A.length;x++)j[A[x]]&&
y.push(j[A[x]])}else y=j;w();typeof e.init=="function"?e.init(u):h.each(e.init,function(B,C){u.bind(C,B)})},refresh:function(){this.trigger("Refresh")},start:function(){if(p.length&&this.state!=h.STARTED){this.state=h.STARTED;this.trigger("StateChanged");b.call(this)}},stop:function(){if(this.state!=h.STOPPED){this.state=h.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(w){v=w!==void 0?w:true;this.trigger("DisableBrowse",v)},getFile:function(w){var u;for(u=
p.length-1;u>=0;u--)if(p[u].id===w)return p[u]},removeFile:function(w){var u;for(u=p.length-1;u>=0;u--)if(p[u].id===w.id)return this.splice(u,1)[0]},splice:function(w,u){var x;x=p.splice(w===void 0?0:w,u===void 0?p.length:u);this.trigger("FilesRemoved",x);this.trigger("QueueChanged");return x},trigger:function(w){var u=q[w.toLowerCase()],x,y;if(u){y=Array.prototype.slice.call(arguments);y[0]=this;for(x=0;x<u.length;x++)if(u[x].func.apply(u[x].scope,y)===false)return false}return true},hasEventListener:function(w){return!!q[w.toLowerCase()]},
bind:function(w,u,x){var y;w=w.toLowerCase();y=q[w]||[];y.push({func:u,scope:x||this});q[w]=y},unbind:function(w,u){w=w.toLowerCase();var x=q[w],y;if(x){if(u!==void 0)for(y=x.length-1;y>=0;y--){if(x[y].func===u){x.splice(y,1);break}}else x=[];x.length||delete q[w]}},unbindAll:function(){var w=this;h.each(q,function(u,x){w.unbind(x)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};h.File=function(e,b,r){this.id=e;this.name=b;this.size=r;this.status=this.percent=this.loaded=
0};h.Runtime=function(){this.getFeatures=function(){};this.init=function(){}};h.QueueProgress=function(){var e=this;e.size=0;e.loaded=0;e.uploaded=0;e.failed=0;e.queued=0;e.percent=0;e.bytesPerSec=0;e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};h.runtimes={};window.plupload=h})();
(function(a,s,k){function j(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(n){try{d=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(l){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}var c={},g={};k.flash={trigger:function(d,n,l){setTimeout(function(){var m=c[d];m&&m.trigger("Flash:"+n,l)},0)}};k.runtimes.Flash=k.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,
progress:true,multipart:true,multi_selection:true}},init:function(d,n){function l(){return s.getElementById(d.id+"_flash")}function m(){if(h++>5E3)n({success:false});else g[d.id]===false&&setTimeout(m,1)}var f,h=0,e=s.body;if(j()<10)n({success:false});else{g[d.id]=false;c[d.id]=d;s.getElementById(d.settings.browse_button);f=s.createElement("div");f.id=d.id+"_flash_container";k.extend(f.style,{position:"absolute",top:"0px",background:d.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",
height:"100%"});f.className="plupload flash";if(d.settings.container){e=s.getElementById(d.settings.container);if(k.getStyle(e,"position")==="static")e.style.position="relative"}e.appendChild(f);(function(){var b,r;b='<object id="'+d.id+'_flash" type="application/x-shockwave-flash" data="'+d.settings.flash_swf_url+'" ';if(k.ua.ie)b+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';b+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+d.settings.flash_swf_url+'" /><param name="flashvars" value="id='+
escape(d.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(k.ua.ie){r=s.createElement("div");f.appendChild(r);r.outerHTML=b}else f.innerHTML=b})();m();f=null;d.bind("Destroy",function(b){k.removeAllEvents(s.body,b.id);delete g[b.id];delete c[b.id];(b=s.getElementById(b.id+"_flash_container"))&&e.removeChild(b)});d.bind("Flash:Init",function(){var b={};try{l().setFileFilters(d.settings.filters,d.settings.multi_selection)}catch(r){n({success:false});
return}if(!g[d.id]){g[d.id]=true;d.bind("UploadFile",function(q,o){var p=q.settings,t=d.settings.resize||{};l().uploadFile(b[o.id],p.url,{name:o.target_name||o.name,mime:k.mimeTypes[o.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:p.chunk_size,width:t.width,height:t.height,quality:t.quality,multipart:p.multipart,multipart_params:p.multipart_params||{},file_data_name:p.file_data_name,format:/\.(jpg|jpeg)$/i.test(o.name)?"jpg":"png",headers:p.headers,urlstream_upload:p.urlstream_upload})});
d.bind("CancelUpload",function(){l().cancelUpload()});d.bind("Flash:UploadProcess",function(q,o){var p=q.getFile(b[o.id]);if(p.status!=k.FAILED){p.loaded=o.loaded;p.size=o.size;q.trigger("UploadProgress",p)}});d.bind("Flash:UploadChunkComplete",function(q,o){var p=q.getFile(b[o.id]);q.trigger("ChunkUploaded",p,{chunk:o.chunk,chunks:o.chunks,response:o.text});p.status!==k.FAILED&&q.state!==k.STOPPED&&l().uploadNextChunk();if(o.chunk==o.chunks-1){p.status=k.DONE;q.trigger("FileUploaded",p,{response:o.text})}});
d.bind("Flash:SelectFiles",function(q,o){var p,t,v=[],w;for(t=0;t<o.length;t++){p=o[t];w=k.guid();b[w]=p.id;b[p.id]=w;v.push(new k.File(w,p.name,p.size))}v.length&&d.trigger("FilesAdded",v)});d.bind("Flash:SecurityError",function(q,o){d.trigger("Error",{code:k.SECURITY_ERROR,message:k.translate("Security error."),details:o.message,file:d.getFile(b[o.id])})});d.bind("Flash:GenericError",function(q,o){d.trigger("Error",{code:k.GENERIC_ERROR,message:k.translate("Generic error."),details:o.message,file:d.getFile(b[o.id])})});
d.bind("Flash:IOError",function(q,o){d.trigger("Error",{code:k.IO_ERROR,message:k.translate("IO error."),details:o.message,file:d.getFile(b[o.id])})});d.bind("Flash:ImageError",function(q,o){d.trigger("Error",{code:parseInt(o.code,10),message:k.translate("Image error."),file:d.getFile(b[o.id])})});d.bind("Flash:StageEvent:rollOver",function(q){var o;o=s.getElementById(d.settings.browse_button);q=q.settings.browse_button_hover;o&&q&&k.addClass(o,q)});d.bind("Flash:StageEvent:rollOut",function(q){var o;
o=s.getElementById(d.settings.browse_button);q=q.settings.browse_button_hover;o&&q&&k.removeClass(o,q)});d.bind("Flash:StageEvent:mouseDown",function(q){var o,p;o=s.getElementById(d.settings.browse_button);p=q.settings.browse_button_active;if(o&&p){k.addClass(o,p);k.addEvent(s.body,"mouseup",function(){k.removeClass(o,p)},q.id)}});d.bind("Flash:StageEvent:mouseUp",function(q){var o;o=s.getElementById(d.settings.browse_button);q=q.settings.browse_button_active;o&&q&&k.removeClass(o,q)});d.bind("Flash:ExifData",
function(q,o){d.trigger("ExifData",d.getFile(b[o.id]),o.data)});d.bind("Flash:GpsData",function(q,o){d.trigger("GpsData",d.getFile(b[o.id]),o.data)});d.bind("QueueChanged",function(){d.refresh()});d.bind("FilesRemoved",function(q,o){var p;for(p=0;p<o.length;p++)l().removeFile(b[o[p].id])});d.bind("StateChanged",function(){d.refresh()});d.bind("Refresh",function(q){var o,p;l().setFileFilters(d.settings.filters,d.settings.multi_selection);if(o=s.getElementById(q.settings.browse_button)){p=k.getPos(o,
s.getElementById(q.settings.container));o=k.getSize(o);k.extend(s.getElementById(q.id+"_flash_container").style,{top:p.y+"px",left:p.x+"px",width:o.w+"px",height:o.h+"px"})}});d.bind("DisableBrowse",function(q,o){l().disableBrowse(o)});n({success:true})}})}}})})(window,document,plupload);
(function(a,s,k,j){function c(e,b){var r;if("FileReader"in a){r=new FileReader;r.readAsDataURL(e);r.onload=function(){b(r.result)}}else return b(e.getAsDataURL())}function g(e,b){var r;if("FileReader"in a){r=new FileReader;r.readAsBinaryString(e);r.onload=function(){b(r.result)}}else return b(e.getAsBinary())}function d(e,b,r,q){var o,p,t,v,w=this;c(f[e.id],function(u){o=s.createElement("canvas");o.style.display="none";s.body.appendChild(o);p=o.getContext("2d");t=new Image;t.onerror=t.onabort=function(){q({success:false})};
t.onload=function(){var x,y,z,A;if(!b.width)b.width=t.width;if(!b.height)b.height=t.height;v=Math.min(b.width/t.width,b.height/t.height);if(v<1||v===1&&r==="image/jpeg"){x=Math.round(t.width*v);y=Math.round(t.height*v);o.width=x;o.height=y;p.drawImage(t,0,0,x,y);if(r==="image/jpeg"){z=new l(atob(u.substring(u.indexOf("base64,")+7)));if(z.headers&&z.headers.length){A=new m;if(A.init(z.get("exif")[0])){A.setExif("PixelXDimension",x);A.setExif("PixelYDimension",y);z.set("exif",A.getBinary());w.hasEventListener("ExifData")&&
w.trigger("ExifData",e,A.EXIF());w.hasEventListener("GpsData")&&w.trigger("GpsData",e,A.GPS())}}if(b.quality)try{u=o.toDataURL(r,b.quality/100)}catch(B){u=o.toDataURL(r)}}else u=o.toDataURL(r);u=u.substring(u.indexOf("base64,")+7);u=atob(u);if(z&&z.headers&&z.headers.length){u=z.restore(u);z.purge()}o.parentNode.removeChild(o);q({success:true,data:u})}else q({success:false})};t.src=u})}function n(){function e(o,p){var t=r?0:-8*(p-1),v=0,w;for(w=0;w<p;w++)v|=q.charCodeAt(o+w)<<Math.abs(t+w*8);return v}
function b(o,p,t){t=arguments.length===3?t:q.length-p-1;q=q.substr(0,p)+o+q.substr(t+p)}var r=false,q;return{II:function(o){if(o===j)return r;else r=o},init:function(o){r=false;q=o},SEGMENT:function(o,p,t){switch(arguments.length){case 1:return q.substr(o,q.length-o-1);case 2:return q.substr(o,p);case 3:b(t,o,p);break;default:return q}},BYTE:function(o){return e(o,1)},SHORT:function(o){return e(o,2)},LONG:function(o,p){if(p===j)return e(o,4);else{var t="",v=r?0:-24,w;for(w=0;w<4;w++)t+=String.fromCharCode(p>>
Math.abs(v+w*8)&255);b(t,o,4)}},SLONG:function(o){o=e(o,4);return o>2147483647?o-4294967296:o},STRING:function(o,p){var t="";for(p+=o;o<p;o++)t+=String.fromCharCode(e(o,1));return t}}}function l(e){var b={65505:{app:"EXIF",name:"APP1",signature:"Exif\u0000"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\u0000"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\u0000"}},r=[],q,o,p=j,t=0;q=new n;q.init(e);if(q.SHORT(0)===65496){o=2;for(e=Math.min(1048576,e.length);o<=e;){p=q.SHORT(o);if(p>=
65488&&p<=65495)o+=2;else{if(p===65498||p===65497)break;t=q.SHORT(o+2)+2;b[p]&&q.STRING(o+4,b[p].signature.length)===b[p].signature&&r.push({hex:p,app:b[p].app.toUpperCase(),name:b[p].name.toUpperCase(),start:o,length:t,segment:q.SEGMENT(o,t)});o+=t}}q.init(null);return{headers:r,restore:function(v){q.init(v);var w=new l(v);if(!w.headers)return false;for(v=w.headers.length;v>0;v--){var u=w.headers[v-1];q.SEGMENT(u.start,u.length,"")}w.purge();o=q.SHORT(2)==65504?4+q.SHORT(4):2;v=0;for(w=r.length;v<
w;v++){q.SEGMENT(o,0,r[v].segment);o+=r[v].length}return q.SEGMENT()},get:function(v){for(var w=[],u=0,x=r.length;u<x;u++)r[u].app===v.toUpperCase()&&w.push(r[u].segment);return w},set:function(v,w){var u=[];if(typeof w==="string")u.push(w);else u=w;for(var x=ii=0,y=r.length;x<y;x++){if(r[x].app===v.toUpperCase()){r[x].segment=u[ii];r[x].length=u[ii].length;ii++}if(ii>=u.length)break}},purge:function(){r=[];q.init(null)}}}}function m(){function e(p,t){var v=b.SHORT(p),w,u,x,y,z,A=[],B={};for(w=0;w<
v;w++){z=p+12*w+2;x=t[b.SHORT(z)];if(x!==j){u=b.SHORT(z+=2);y=b.LONG(z+=2);z+=4;A=[];switch(u){case 1:case 7:if(y>4)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.BYTE(z+u);break;case 2:if(y>4)z=b.LONG(z)+q.tiffHeader;B[x]=b.STRING(z,y-1);continue;case 3:if(y>2)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SHORT(z+u*2);break;case 4:if(y>1)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.LONG(z+u*4);break;case 5:z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.LONG(z+u*4)/b.LONG(z+u*4+4);break;case 9:z=
b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SLONG(z+u*4);break;case 10:z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SLONG(z+u*4)/b.SLONG(z+u*4+4);break;default:continue}y=y==1?A[0]:A;B[x]=o.hasOwnProperty(x)&&typeof y!="object"?o[x][y]:y}}return B}var b,r,q={},o;b=new n;r={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",
34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};o={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",
6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",
7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",
71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},
ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(p){q={tiffHeader:10};
if(p===j||!p.length)return false;b.init(p);if(b.SHORT(0)===65505&&b.STRING(4,5).toUpperCase()==="EXIF\u0000"){p=j;p=q.tiffHeader;b.II(b.SHORT(p)==18761);if(b.SHORT(p+=2)!==42)p=false;else{q.IFD0=q.tiffHeader+b.LONG(p+2);p=e(q.IFD0,r.tiff);q.exifIFD="ExifIFDPointer"in p?q.tiffHeader+p.ExifIFDPointer:j;q.gpsIFD="GPSInfoIFDPointer"in p?q.tiffHeader+p.GPSInfoIFDPointer:j;p=true}return p}return false},EXIF:function(){var p;p=e(q.exifIFD,r.exif);if(p.ExifVersion&&k.typeOf(p.ExifVersion)==="array"){for(var t=
0,v="";t<p.ExifVersion.length;t++)v+=String.fromCharCode(p.ExifVersion[t]);p.ExifVersion=v}return p},GPS:function(){var p;p=e(q.gpsIFD,r.gps);if(p.GPSVersionID)p.GPSVersionID=p.GPSVersionID.join(".");return p},setExif:function(p,t){if(p!=="PixelXDimension"&&p!=="PixelYDimension")return false;var v;v=p;var w,u,x,y=0;if(typeof v==="string"){w=r["exif".toLowerCase()];for(hex in w)if(w[hex]===v){v=hex;break}}w=q["exif".toLowerCase()+"IFD"];u=b.SHORT(w);for(i=0;i<u;i++){x=w+12*i+2;if(b.SHORT(x)==v){y=
x+8;break}}if(y){b.LONG(y,t);v=true}else v=false;return v},getBinary:function(){return b.SEGMENT()}}}var f={},h;k.runtimes.Html5=k.addRuntime("html5",{getFeatures:function(){var e,b,r,q,o,p;b=r=o=p=false;if(a.XMLHttpRequest){e=new XMLHttpRequest;r=!!e.upload;b=!!(e.sendAsBinary||e.upload)}if(b){q=!!(e.sendAsBinary||a.Uint8Array&&a.ArrayBuffer);o=!!(File&&(File.prototype.getAsDataURL||a.FileReader)&&q);p=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}h=k.ua.safari&&
k.ua.windows;return{html5:b,dragdrop:function(){var t=s.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t}(),jpgresize:o,pngresize:o,multipart:o||!!a.FileReader||!!a.FormData,canSendBinary:q,cantSendBlobInFormData:!!(k.ua.gecko&&a.FormData&&a.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:r,chunks:p,multi_selection:!(k.ua.safari&&k.ua.windows),triggerDialog:k.ua.gecko&&a.FormData||k.ua.webkit}},init:function(e,b){function r(p){var t,v,w=[],u,x={};for(v=0;v<
p.length;v++){t=p[v];if(!x[t.name]){x[t.name]=true;u=k.guid();f[u]=t;w.push(new k.File(u,t.fileName||t.name,t.fileSize||t.size))}}w.length&&e.trigger("FilesAdded",w)}var q,o;q=this.getFeatures();if(q.html5){e.bind("Init",function(p){var t,v,w=[],u,x,y=p.settings.filters,z,A;u=s.body;t=s.createElement("div");t.id=p.id+"_html5_container";k.extend(t.style,{position:"absolute",background:e.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:e.settings.shim_bgcolor?
"":0});t.className="plupload html5";if(e.settings.container){u=s.getElementById(e.settings.container);if(k.getStyle(u,"position")==="static")u.style.position="relative"}u.appendChild(t);u=0;a:for(;u<y.length;u++){z=y[u].extensions.split(/,/);for(x=0;x<z.length;x++){if(z[x]==="*"){w=[];break a}(A=k.mimeTypes[z[x]])&&k.inArray(A,w)===-1&&w.push(A)}}t.innerHTML='<input id="'+e.id+'_html5"  style="font-size:999px" type="file" accept="'+w.join(",")+'" '+(e.settings.multi_selection&&e.features.multi_selection?
'multiple="multiple"':"")+" />";t.scrollTop=100;w=s.getElementById(e.id+"_html5");p.features.triggerDialog?k.extend(w.style,{position:"absolute",width:"100%",height:"100%"}):k.extend(w.style,{cssFloat:"right",styleFloat:"right"});w.onchange=function(){r(this.files);this.value=""};if(v=s.getElementById(p.settings.browse_button)){var B=p.settings.browse_button_hover,C=p.settings.browse_button_active;t=p.features.triggerDialog?v:t;if(B){k.addEvent(t,"mouseover",function(){k.addClass(v,B)},p.id);k.addEvent(t,
"mouseout",function(){k.removeClass(v,B)},p.id)}if(C){k.addEvent(t,"mousedown",function(){k.addClass(v,C)},p.id);k.addEvent(s.body,"mouseup",function(){k.removeClass(v,C)},p.id)}p.features.triggerDialog&&k.addEvent(v,"click",function(E){var D=s.getElementById(p.id+"_html5");D&&!D.disabled&&D.click();E.preventDefault()},p.id)}});e.bind("PostInit",function(){var p=s.getElementById(e.settings.drop_element);if(p)if(h)k.addEvent(p,"dragenter",function(){var t,v;t=s.getElementById(e.id+"_drop");if(!t){t=
s.createElement("input");t.setAttribute("type","file");t.setAttribute("id",e.id+"_drop");t.setAttribute("multiple","multiple");k.addEvent(t,"change",function(){r(this.files);k.removeEvent(t,"change",e.id);t.parentNode.removeChild(t)},e.id);p.appendChild(t)}k.getPos(p,s.getElementById(e.settings.container));v=k.getSize(p);k.getStyle(p,"position")==="static"&&k.extend(p.style,{position:"relative"});k.extend(t.style,{position:"absolute",display:"block",top:0,left:0,width:v.w+"px",height:v.h+"px",opacity:0})},
e.id);else{k.addEvent(p,"dragover",function(t){t.preventDefault()},e.id);k.addEvent(p,"drop",function(t){var v=t.dataTransfer;v&&v.files&&r(v.files);t.preventDefault()},e.id)}});e.bind("Refresh",function(p){var t,v,w;if(t=s.getElementById(e.settings.browse_button)){v=k.getPos(t,s.getElementById(p.settings.container));w=k.getSize(t);p=s.getElementById(e.id+"_html5_container");k.extend(p.style,{top:v.y+"px",left:v.x+"px",width:w.w+"px",height:w.h+"px"});if(e.features.triggerDialog){k.getStyle(t,"position")===
"static"&&k.extend(t.style,{position:"relative"});v=parseInt(k.getStyle(t,"z-index"),10);if(isNaN(v))v=0;k.extend(t.style,{zIndex:v});k.extend(p.style,{zIndex:v-1})}}});e.bind("DisableBrowse",function(p,t){var v=s.getElementById(p.id+"_html5");if(v)v.disabled=t});e.bind("CancelUpload",function(){o&&o.abort&&o.abort()});e.bind("UploadFile",function(p,t){function v(y,z,A){var B;if(File.prototype.slice)try{y.slice();return y.slice(z,A)}catch(C){return y.slice(z,A-z)}else return(B=File.prototype.webkitSlice||
File.prototype.mozSlice)?B.call(y,z,A):null}function w(y){function z(){function E(I){var R=0,O="----pluploadboundary"+k.guid(),N,M="";o=new XMLHttpRequest;if(o.upload)o.upload.onprogress=function(F){t.loaded=Math.min(t.size,B+F.loaded-R);p.trigger("UploadProgress",t)};o.onreadystatechange=function(){var F,K;if(o.readyState==4&&p.state!==k.STOPPED){try{F=o.status}catch(U){F=0}if(F>=400)p.trigger("Error",{code:k.HTTP_ERROR,message:k.translate("HTTP Error."),file:t,status:F});else{if(H){K={chunk:A,chunks:H,
response:o.responseText,status:F};p.trigger("ChunkUploaded",t,K);B+=L;if(K.cancelled){t.status=k.FAILED;return}t.loaded=Math.min(t.size,(A+1)*J)}else t.loaded=t.size;p.trigger("UploadProgress",t);I=D=N=M=null;if(!H||++A>=H){t.status=k.DONE;p.trigger("FileUploaded",t,{response:o.responseText,status:F})}else z()}}};if(p.settings.multipart&&q.multipart){G.name=t.target_name||t.name;o.open("post",Q,true);k.each(p.settings.headers,function(F,K){o.setRequestHeader(K,F)});if(typeof I!=="string"&&a.FormData){N=
new FormData;k.each(k.extend(G,p.settings.multipart_params),function(F,K){N.append(K,F)});N.append(p.settings.file_data_name,I);o.send(N);return}if(typeof I==="string"){o.setRequestHeader("Content-Type","multipart/form-data; boundary="+O);k.each(k.extend(G,p.settings.multipart_params),function(F,K){M+="--"+O+'\r\nContent-Disposition: form-data; name="'+K+'"\r\n\r\n';M+=unescape(encodeURIComponent(F))+"\r\n"});S=k.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";
M+="--"+O+'\r\nContent-Disposition: form-data; name="'+p.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(t.name))+'"\r\nContent-Type: '+S+"\r\n\r\n"+I+"\r\n--"+O+"--\r\n";R=M.length-I.length;I=M;if(o.sendAsBinary)o.sendAsBinary(I);else if(q.canSendBinary){for(var T=new Uint8Array(I.length),P=0;P<I.length;P++)T[P]=I.charCodeAt(P)&255;o.send(T.buffer)}return}}Q=k.buildUrl(p.settings.url,k.extend(G,p.settings.multipart_params));o.open("post",Q,true);o.setRequestHeader("Content-Type",
"application/octet-stream");k.each(p.settings.headers,function(F,K){o.setRequestHeader(K,F)});o.send(I)}var D,H,G,J,L,S,Q=p.settings.url;if(!(t.status==k.DONE||t.status==k.FAILED||p.state==k.STOPPED)){G={name:t.target_name||t.name};if(u.chunk_size&&t.size>u.chunk_size&&(q.chunks||typeof y=="string")){J=u.chunk_size;H=Math.ceil(t.size/J);L=Math.min(J,t.size-A*J);D=typeof y=="string"?y.substring(A*J,A*J+L):v(y,A*J,A*J+L);G.chunk=A;G.chunks=H}else{L=t.size;D=y}if(p.settings.multipart&&q.multipart&&typeof D!==
"string"&&C&&q.cantSendBlobInFormData&&q.chunks&&p.settings.chunk_size){C.onload=function(){E(C.result)};C.readAsBinaryString(D)}else E(D)}}var A=0,B=0,C="FileReader"in a?new FileReader:null;z()}var u=p.settings,x;x=f[t.id];if(q.jpgresize&&p.settings.resize&&/\.(png|jpg|jpeg)$/i.test(t.name))d.call(p,t,p.settings.resize,/\.png$/i.test(t.name)?"image/png":"image/jpeg",function(y){if(y.success){t.size=y.data.length;w(y.data)}else q.chunks?w(x):g(x,w)});else!q.chunks&&q.jpgresize?g(x,w):w(x)});e.bind("Destroy",
function(p){var t,v,w=s.body,u={inputContainer:p.id+"_html5_container",inputFile:p.id+"_html5",browseButton:p.settings.browse_button,dropElm:p.settings.drop_element};for(t in u)(v=s.getElementById(u[t]))&&k.removeAllEvents(v,p.id);k.removeAllEvents(s.body,p.id);if(p.settings.container)w=s.getElementById(p.settings.container);w.removeChild(s.getElementById(u.inputContainer))});b({success:true})}else b({success:false})}})})(window,document,plupload);
(function(a){var s=function(j,c){var g=a.extend({},k.defaults,c||{});a.telligent.evolution.get({url:g.endpoint,data:{url:j,maxImageWidth:typeof c.maxImageWidth!=="undefined"?c.maxImageWidth:g.maxImageWidth,maxImageHeight:typeof c.maxImageHeight!=="undefined"?c.maxImageHeight:g.maxImageHeight},success:function(d){if(d&&g.success&&typeof d!=="undefined"&&d!==null)g.success(d);else g.error&&g.error(d)},error:function(d,n,l){g.error&&g.error(d,n,l)}})},k={load:function(j,c){s(j,c)},render:function(j,
c){if(!(j===null||typeof j==="undefined"||typeof j.url==="undefined"||j.url.length===0||typeof j.title==="undefined"||j.title.length===0)){var g=a.extend({},k.defaults,c);return a.telligent.evolution.template.compile(g.template)(j)}}};k.defaults={endpoint:"",maxImageWidth:90,maxImageHeight:90,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'};
if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.preview=k})(jQuery);(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.regex={encode:function(s){if(!s)return s;return s.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&")}}})(jQuery,window);
(function(a){var s=null,k=function(c){c.area.css({height:"auto"}).css({height:c.area.prop("scrollHeight")-(s===null?c.offset:s)});var g=c.area.outerHeight();if(g!==c.oldHeight){g>=c.maxHeight?c.area.css({overflow:"visible"}):c.area.css({overflow:"hidden"});c.area.trigger("evolutionResize",{newHeight:g,oldHeight:c.oldHeight});c.oldHeight=g}},j=function(c){return parseInt(c.replace("px",""),10)};a(function(){var c=a("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");
if(Math.abs(c.prop("scrollHeight")-c.height())<=1)s=0;c.remove()});a.fn.evolutionResize=function(){return this.filter("textarea").each(function(){var c=a(this).css({resize:"none",overflow:"hidden"}),g={area:c,oldHeight:c.height(),maxHeight:j(c.css("max-height")),offset:c.innerHeight()!==c.height()?j(c.css("padding-top"))+j(c.css("padding-bottom")):0};c.bind("input keydown keyup",function(){k(g)});k(g)})}})(jQuery);
(function(a){var s={};a.event.special.scrollend={setup:function(k){s=a.extend({padding:150,delay:250},k)},add:function(){var k=a(this);if(!k.data("_scrollend_init")){k.data("_scrollend_init",true);var j=this===document,c=j?a(window):k,g=false;c.on("scroll",function(){g=true});setInterval(function(){if(g){(j?a(k).height()-a(k).scrollTop()-a(c).height()<=s.padding:k.scrollTop()+k.innerHeight()+s.padding>=k[0].scrollHeight)&&k.trigger("scrollend");g=false}},s.delay)}}}})(jQuery);
(function(a){var s={};a.event.special.scrolltop={setup:function(k){s=a.extend({padding:150,delay:250},k)},add:function(){var k=a(this);if(!k.data("_scrolltop_init")){k.data("_scrolltop_init",true);var j=false;(this===document?a(window):k).on("scroll",function(){j=true});setInterval(function(){if(j){k.scrollTop()<=s.padding&&k.trigger("scrolltop");j=false}},s.delay)}}}})(jQuery);
(function(a){var s={},k=null,j=0,c=false,g=0,d=null,n=0,l=function(h){n++;if(!(n>12)){clearTimeout(g);g=setTimeout(function(){h.start();clearTimeout(g)},5E3)}},m=function(h,e,b){if(h=s[h+"|"+e]){var r=b&&b.length>0?a.parseJSON(b):null;a.each(h,function(q,o){try{o(r)}catch(p){}})}},f=function(h){if(a.connection){a.each(h.sockets,function(e,b){f[b.name]={on:function(r,q){var o=b.fullName+"|"+r;s[o]=s[o]||[];s[o].push(q)},off:function(r){delete s[b.fullName+"|"+r]},send:function(r,q){if(j==a.signalR.connectionState.connected){var o=
a.telligent.evolution.url.serializeQuery(a.extend(q,{_s:b.fullName,_m:r}));k.send(o)}}}});a.ajaxPrefilter(function(e,b,r){e.url.indexOf(h.endpoint)===0&&a.telligent.evolution.writeAuthorizationHeader(r)});if(h.sockets.length>0){k=a.connection(h.endpoint);k.received(function(e){e=a.telligent.evolution.url.parseQuery(e);m(e._s,e._m,e._d)});k.error(function(){j=a.signalR.connectionState.disconnected;k.stop()});k.stateChanged(function(e){j=e.newState;j==a.signalR.connectionState.disconnected&&l(k)});
k.disconnected(function(){});k.reconnected(function(){j=a.signalR.connectionState.connected});k.start(function(){if(!c){c=true;a.telligent.evolution.messaging.publish("socket.connected")}clearInterval(d);d=setInterval(function(){j==a.signalR.connectionState.connected&&k.send("_KEEP_ALIVE")},6E4);n=0})}}};a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};a.telligent.evolution.sockets=a.telligent.evolution.sockets||f})(jQuery,window);
(function(a,s){var k=[],j=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",c=function(o,p){return p%2==1?o.settings.imagesPathUrl+"star-right-on."+j:o.settings.imagesPathUrl+"star-left-on."+j},g=function(o,p){return p%2==1?o.settings.imagesPathUrl+"star-right-off."+j:o.settings.imagesPathUrl+"star-left-off."+j},d=function(o,p){var t;for(t=0;t<k.length;t++)if(k[t].src==p)return true;return false},n=function(o,p,t){return typeof o.settings.titles=="object"?o.settings.titles[p].replace("{0}",t):o.settings.titles?
o.settings.titles.replace("{0}",t):t},l=function(o){return typeof o.internal.value!=="undefined"?o.internal.value:o.settings.value},m=function(o,p){var t,v=o.settings.maxRating*2;p=p*2-1;for(t=0;t<v;t++)t<=p?a(o.internal.state.find("img").get(t)).attr("src",c(o,t)):a(o.internal.state.find("img").get(t)).attr("src",g(o,t))},f=function(o,p){if(!(!o.internal.isInitialized||o.settings.isReadOnly)){o.internal.state.addClass(o.settings.overClass);m(o,p)}},h=function(o,p){if(!(!o.internal.isInitialized||
o.settings.isReadOnly)){o.internal.state.removeClass(o.settings.overClass);m(o,p)}},e=function(o){return this.each(function(){var p={settings:a.extend({},a.fn.evolutionStarRating.defaults,o||{}),internal:{state:a(this)}};if(!p.settings.imagesPathUrl)p.settings.imagesPathUrl=a.telligent.evolution.site.getBaseUrl()+"utility/images/";var t,v,w;for(w=0;w<2;w++){v=c(p,w);if(!d(v)){t=new Image;t.src=v;k[k.length]=t}v=g(p,w);if(!d(v)){t=new Image;t.src=v;k[k.length]=t}}a(this).data("evolutionStarRating_context",
p);b(p)})},b=function(o){o.internal.state.addClass(o.settings.starClass).css("white-space","nowrap").find("a").unbind(".evolutionStarRating").empty().end().bind("mouseleave",function(){m(o,l(o))});o.settings.isReadOnly&&o.internal.state.addClass(o.settings.readOnlyClass);var p,t=o.settings.maxRating*2,v=typeof o.settings.ratingCount==="undefined";for(p=0;p<t;p++)(function(){var w,u;u=a("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"});o.settings.isReadOnly||
(w=a('<a href="#" />').css({textDecoration:"none"}).append(u));var x=(p+1)/2;x<=o.settings.value?u.attr("src",c(o,p)):u.attr("src",g(o,p));if(!o.settings.isReadOnly){if(o.settings.useHalfStars)y=n(o,p,x);else{x=Math.ceil(x);var y=n(o,x,x)}v&&w.attr("title",y);u.attr("alt",y);w.data("rating-value",x).bind("click.evolutionStarRating",function(){var z=w.data("rating-value");if(!(!o.internal.isInitialized||o.settings.isReadOnly)){o.internal.value=z;if(!o.settings.allowMultipleSelections)o.settings.isReadOnly=
true;o.internal.savingValue=true;o.settings.onRate(z)}return false}).bind("focus.evolutionStarRating",function(){f(o,w.data("rating-value"))}).bind("mouseover.evolutionStarRating",function(){f(o,w.data("rating-value"))}).bind("blur.evolutionStarRating",function(){h(o,w.data("rating-value"))}).bind("mouseout.evolutionStarRating",function(){h(o,w.data("rating-value"))})}u.attr("align","absmiddle").attr("border",0);w?o.internal.state.append(w):o.internal.state.append(u)})();r(o);o.internal.isInitialized=
true},r=function(o){o.settings.ratingMessageFormat&&!isNaN(parseInt(o.settings.ratingCount))&&!isNaN(parseInt(o.settings.value))&&o.internal.state.attr("title",o.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(o.settings.value*10)/10).replace(/\{count\}/gi,o.settings.ratingCount))},q={val:function(o){var p=this.data("evolutionStarRating_context");if(p!==null)if(typeof o!=="undefined"){p.internal.value=o;m(p,o);return o}else return l(p);return 0},readOnly:function(o){var p=this.data("evolutionStarRating_context");
if(p!==null)if(typeof o!=="undefined")(p.settings.isReadOnly=o)?p.internal.state.find("a").css({cursor:"default"}):p.internal.state.find("a").css({cursor:"pointer"});else return p.settings.isReadOnly;return true},option:function(o,p){if(typeof o==="object")return this.each(function(){var v=a(this).data("evolutionStarRating_context");if(v!=null){v.settings=a.extend({},v.settings,o);e.apply(a(this),[v.settings])}});else if(typeof o!=="undefined"&&typeof p!=="undefined")return this.each(function(){var v=
a(this).data("evolutionStarRating_context");if(v!=null){v.settings[o]=p;e.apply(a(this),[v.settings])}});else if(typeof o!=="undefined"){var t=this.data("evolutionStarRating_context");return t!==null?t.settings[o]:null}}};a.fn.evolutionStarRating=function(o){if(o in q)return q[o].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof o==="object"||!o)return e.apply(this,arguments);else a.error("Method "+o+" does not exist on jQuery.fn.evolutionStarRating")};a.extend(a.fn.evolutionStarRating,
{defaults:{value:0,maxRating:5,imagesPathUrl:"",useHalfStars:false,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:["Terrible","Poor","Fair","Average","Good","Excellent"],isReadOnly:false,allowMultipleSelections:true,ratingCount:s,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(){}}})})(jQuery,undefined);
(function(a){var s={openTagSelector:function(){var l=this.data("evolutionTagTextBox");if(l){window.__tagEditor={SetSelectedTags:function(f){for(var h=[],e=j(l),b=l.settings.allTags,r,q=0;q<e.length;q++){r=false;for(var o=0;o<b.length;o++)if(e[q].toUpperCase()==b[o].toUpperCase()){r=true;break}r||(h[h.length]=e[q])}for(q=0;q<f.length;q++)h[h.length]=f[q];a(l.internal.state).val(h.join(", "))},GetAllTagsWithEncoding:function(){for(var f=[],h=l.settings.allTags,e=a("<div></div>"),b=0;b<h.length;b++){e.text(h[b]);
f[b]=[h[b],e.html()]}return f},GetSelectedTags:function(){return j(l)}};var m=l.settings.selectTagsModalUrl;if(m.substr(0,2)=="~/")m=a.telligent.evolution.site.getBaseUrl()+m.substr(2);if(window.Telligent_Modal)window.Telligent_Modal.Open(m,400,350,null);else a.glowModal&&a.glowModal(m,{width:400,height:350})}}},k=function(l){return this.each(function(){var m={settings:a.extend({},a.fn.evolutionTagTextBox.defaults,l||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",
currentTag:"",currentTagPosition:0}};a(this).data("evolutionTagTextBox",m);n(m);a(this).bind("keyup.evolutionTagTextBox",function(f){return g(m,f)});a(this).bind("keydown.evolutionTagTextBox",function(f){return c(m,f)});a(this).bind("onblur.evolutionTagTextBox",function(){window.clearTimeout(m.internal.suggestionTimeoutHandle);return true})})},j=function(l){l=a(l.internal.state).val().split(/;|,/);for(var m=[],f=0;f<l.length;f++){l[f]=l[f].replace(/^\s+|\s+$/g,"");if(l[f]!="")m[m.length]=l[f]}return m},
c=function(l,m){window.clearTimeout(l.internal.suggestionTimeoutHandle);if(!m)m=window.event;if(m){if(m.keyCode==13){l.internal.state.focus();if(document.selection){var f=window.document.selection.createRange();if(f.text&&f.text.length>0){f.moveStart("character",f.text.length);f.select()}}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0")l.internal.state.selectionStart=l.internal.state.selectionEnd;m.cancelBubble=true;return m.returnValue=false}else if(m.keyCode==8){l.internal.state.focus();
if(document.selection){if(f=window.document.selection.createRange()){f.moveStart("character",-1);f.text="";m.cancelBubble=true;return m.returnValue=false}}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0"){f=l.internal.state.selectionStart;var h=l.internal.state.selectionEnd;if(f==h)return true;f>0&&f--;l.internal.state.value=l.internal.state.value.substring(0,f)+l.internal.state.value.substring(h);l.internal.state.selectionStart=f;l.internal.state.selectionEnd=f;m.cancelBubble=
true;return m.returnValue=false}}return true}},g=function(l){window.clearTimeout(l.internal.suggestionTimeoutHandle);l.internal.suggestionTimeoutHandle=window.setTimeout(function(){d(l)},249);return true},d=function(l){if(!document.selection&&!l.internal.state.selectionStart&&l.internal.state.selectionStart!="0")return true;if(a(l.internal.state).val()==l.internal.previousValue)return true;l.internal.previousValue=a(l.internal.state).val();n(l);if(l.internal.currentTag=="")return true;var m;a:{m=
l.internal.currentTag;var f,h,e,b=l.settings.allTags;for(f=0;f<b.length;f++)if(b[f].toLowerCase().indexOf(m)==0){e=false;for(h=0;h<l.internal.previousTags.length&&!e;h++)if(l.internal.previousTags[h]==b[f].toLowerCase())e=true;if(!e){m=b[f];break a}}m=null}if(!m||m.length==l.internal.currentTag.length)return true;m=m.substr(l.internal.currentTag.length);a(l.internal.state).val(a(l.internal.state).val().substr(0,l.internal.currentTagPosition+l.internal.currentTag.length)+m+a(l.internal.state).val().substr(l.internal.currentTagPosition+
l.internal.currentTag.length));l.internal.state.focus();if(document.selection){f=l.internal.state.createTextRange();f.select();f.moveStart("character",l.internal.currentTagPosition+l.internal.currentTag.length);f.moveEnd("character",-(a(l.internal.state).val().length-(l.internal.currentTagPosition+l.internal.currentTag.length+m.length)));f.select()}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0"){l.internal.state.selectionStart=l.internal.currentTagPosition+l.internal.currentTag.length;
l.internal.state.selectionEnd=l.internal.currentTagPosition+l.internal.currentTag.length+m.length}},n=function(l){var m=a(l.internal.state).val().toLowerCase().split(/;|,/),f,h,e;l.internal.currentTag="";var b=0,r=true;for(f=0;f<m.length;f++){h=m[f].replace(/^\s+/g,"");b+=m[f].length-h.length;m[f]=h;e=false;for(h=0;h<l.internal.previousTags.length&&!e;h++)if(m[f]==l.internal.previousTags[h]){l.internal.previousTags.splice(h,1);e=true}if(!e)if(l.internal.currentTag!="")r=false;else{l.internal.currentTag=
m[f];l.internal.currentTagPosition=b}b+=m[f].length+1}if(!r)l.internal.currentTag="";l.internal.previousTags=m};a.fn.evolutionTagTextBox=function(l){if(l in s)return s[l].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof l==="object"||!l)return k.apply(this,arguments);else a.error("Method "+l+" does not exist on jQuery.fn.evolutionTagTextBox")};a.extend(a.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/TagSelector.aspx?TagEditor=__tagEditor"}})})(jQuery);
(function(a){var s={},k={open:"<%",close:"%>"},j=function(g,d){var n=a.extend({},k,d||{}),l=RegExp("\\"+n.open+"=([\\s\\S]+?)"+n.close,"g"),m=RegExp("\\"+n.open+":([\\s\\S]+?)"+n.close,"g");n=RegExp("\\"+n.open+"(.*?)"+n.close,"g");l=" var source = [];  with(data){with(extraHelpers){with(defaultHelpers){  source.push('"+g.replace(/[\r\n]/g,"").replace(l,"'); source.push(String($1)); source.push('").replace(m,"'); source.push(escape(String($1))); source.push('").replace(n,"'); $1 source.push('")+"');  }}}  return source.join('');";
m=new Function("defaultHelpers","extraHelpers","data",l);m.compiledSource="function(defaultHelpers, extraHelpers, data) { "+l+" } ";return m},c={compile:function(g,d,n){var l=s[g];if(typeof l==="undefined"){var m=document.getElementById(g)!==null?document.getElementById(g).innerHTML:g,f=j(m,n);s[g]=l=function(h){return f.call(this,c.helpers||{},d||{},h||{})};l.source={raw:m,compiled:f.compiledSource}}return l},helpers:{foreach:function(g,d){if(g&&g.length>0&&d)for(var n=0;n<g.length;n++)d(g[n],n)},
escape:function(){var g=/&/g,d=/</g,n=/>/g,l=/\"/g;return function(m){return m.replace(g,"&amp;").replace(d,"&lt;").replace(n,"&gt;").replace(l,"&quot;")}}()}};a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};a.telligent.evolution.template=c})(jQuery);
(function(a){var s={show:function(k){var j=a.extend({},s.defaults,k||{}),c=a('<div class="theater-mask"></div>').hide().appendTo("body"),g=a('<div class="theater-container"></div>').hide().appendTo("body");k=a('<div class="theater-content-container"></div>').appendTo(g);var d=a('<div class="theater-content"></div>').appendTo(k),n=a('<a href="#" class="theater-next">&rarr;</a>').appendTo(g),l=a('<a href="#" class="theater-back">&larr;</a>').appendTo(g),m=a('<a href="#" class="theater-close">X</a>').appendTo(k),
f=null,h=null,e=null,b=function(q,o){a("body").css({overflow:"hidden"});f=q;q(function(p){n.hide();l.hide();o?o(d,p):d.hide().html(p);if(!c.is(":visible")){c.show();g.show()}j.loaded(d);h=j.nextContent(d);e=j.previousContent(d);d.show();h&&h!==null&&n.show();e&&e!==null&&l.show()})},r=function(){a("body").css({overflow:"auto"});n.unbind("_evolution_theater");l.unbind("_evolution_theater");m.unbind("_evolution_theater");g.unbind("_evolution_theater");c.hide().remove();g.hide().remove();a(document).unbind("_evolution_theater")};
s.refresh=function(q){b(f,q)};s.hide=function(){r()};n.bind("click._evolution_theater",function(q){q.preventDefault();h&&h!==null&&b(h)});l.bind("click._evolution_theater",function(q){q.preventDefault();e&&e!==null&&b(e)});m.bind("click._evolution_theater",function(q){q.preventDefault();r()});g.bind("click._evolution_theater",function(q){q.target===g.get(0)&&r()});a(document).bind("keydown._evolution_theater",function(q){if(c.is(":visible"))if(q.which===39){if(!a(q.target).is("input,textarea")){h&&
h!==null&&b(h);n.addClass("pressed")}}else if(q.which===37){if(!a(q.target).is("input,textarea")){e&&e!==null&&b(e);l.addClass("pressed")}}else q.which===27&&r()});a(document).bind("keyup._evolution_theater",function(q){if(c.is(":visible"))if(q.which===39)n.removeClass("pressed");else q.which===37&&l.removeClass("pressed")});b(j.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},nextContent:function(){return null},previousContent:function(){return null},loaded:function(){}}};
a.evolutionTheater=s})(jQuery);
(function(a){var s={val:function(c){if(c===undefined){var g=this.data("evolutionToggleLink");if(g)return g.settings.val;return false}else return this.each(function(){var d=a(this).data("evolutionToggleLink");if(d){d.settings.val=c;d.internal.processing=false;j(d)}})}},k=function(c){return this.each(function(){var g={settings:a.extend({},a.fn.evolutionToggleLink.defaults,c||{}),internal:{state:a(this),processing:false}};g.internal.state.data("evolutionToggleLink",g).click(function(){if(!g.internal.processing&&g.settings.changeState){g.internal.processing=
true;j(g);g.settings.changeState(!g.settings.val)}return false});j(g)})},j=function(c){if(c.internal.processing)c.internal.state.attr("class",c.settings.processingCssClass).attr("title",c.settings.processingTitle).html(c.settings.processingHtml);else c.settings.val?c.internal.state.attr("class",c.settings.onCssClass).attr("title",c.settings.onTitle).html(c.settings.onHtml):c.internal.state.attr("class",c.settings.offCssClass).attr("title",c.settings.offTitle).html(c.settings.offHtml)};a.fn.evolutionToggleLink=
function(c){if(c in s)return s[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||!c)return k.apply(this,arguments);else a.error("Method "+c+" does not exist on jQuery.fn.evolutionToggleLink")};a.extend(a.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:false}})})(jQuery);
(function(a){var s=function(c){var g=a(this);g.off("mouseover mouseout");g=g.data("touch");g.start=g.current=c.originalEvent.touches[0].clientX},k=function(c){a(this).data("touch").current=c.originalEvent.touches[0].clientX},j=function(){var c=a(this),g=c.data("touch");g.current-g.start>48&&c.triggerHandler("swiperight");g.start=0;g.current=0};a.event.special.swiperight={setup:function(){a(this).data("touch",{start:0,current:0}).bind("touchstart",s).bind("touchmove",k).bind("touchend",j)},teardown:function(){a(this).removeData("touch").unbind("touchstart",
s).unbind("touchmove",k).unbind("touchend",j)}}})(jQuery);
(function(a){var s={};parseData=function(k){k=k.get(0);var j={};a.each(k.attributes,function(c,g){if(g.name.indexOf("data-")===0){var d=g.name.substring(5);j[d]=d==="configuration"?a.telligent.evolution.url.parseQuery(g.value):g.value}});return j};api={components:{},render:function(k){var j=a(k||document);a.each(api.components,function(c,g){var d=a(".ui-"+c,j);j.hasClass(".ui-"+c)&&d.add(j);if(d&&d.length>0&&typeof g.setup!=="undefined"&&!s[c]){g.setup.call(this);s[c]=true}d&&d.length>0&&typeof g.add!==
"undefined"&&d.each(function(){var n=a(this);if(!n.data("_telligent_evolution_ui_render_add")){g.add.call(n,n,api.data(n));n.data("_telligent_evolution_ui_render_add",true)}})})},data:function(k){if(!k)return{};k=a(k);var j=k.data("_telligent_evolution_ui_data");if(j===null||typeof j==="undefined"){j=parseData(k);k.data("_telligent_evolution_ui_data",j)}return j}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.ui=api})(jQuery);
(function(a){var s=function(k,j){return function(){try{j.before&&j.before.apply(this,arguments)}catch(c){}var g=k.apply(this,arguments);try{j.after&&j.after.apply(this,arguments)}catch(d){}return g}};a.each(["html","append","prepend"],function(k,j){a.fn[j]=s(a.fn[j],{after:function(){a.telligent.evolution.ui.render(this)}})});a.each(["appendTo","prependTo"],function(k,j){a.fn[j]=s(a.fn[j],{after:function(c){a.telligent.evolution.ui.render(a(c))}})});a.each(["after","before"],function(k,j){a.fn[j]=
s(a.fn[j],{after:function(){a.telligent.evolution.ui.render(this.parent())}})});a.each(["insertAfter","insertBefore"],function(k,j){a.fn[j]=s(a.fn[j],{after:function(c){a.telligent.evolution.ui.render(a(c).parent())}})})})(jQuery);jQuery(function(a){a.telligent.evolution.ui.render()});
(function(a){a.telligent.evolution.ui.components.bookmark={setup:function(){},add:function(s,k){var j={contentId:k.contentid,contentTypeId:k.contenttypeid,typeId:k.bookmarktypeid,initialState:k.value=="true",contentTypeName:k.contenttypename,onBookmark:function(c,g,d,n){a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}&ContentTypeId={ContentTypeId}"+(d?"&TypeId="+d:""),data:{ContentId:c,ContentTypeId:g},dataType:"json",success:function(){n()}})},
onUnbookmark:function(c,g,d,n){a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}"+(d?"&TypeId="+d:""),data:{ContentId:c},dataType:"json",success:function(){n()}})}};if(k.configuration.deleteBookmarkText)j.deleteBookmarkText=k.configuration.deleteBookmarkText;if(k.configuration.addBookmarkText)j.addBookmarkText=k.configuration.addBookmarkText;if(k.configuration.processingText)j.processingText=k.configuration.processingText;if(k.configuration.addBookmarkCssClass)j.addBookmarkCssClass=
k.configuration.addBookmarkCssClass;if(k.configuration.deleteBookmarkCssClass)j.deleteBookmarkCssClass=k.configuration.deleteBookmarkCssClass;if(k.configuration.processingCssClass)j.processingCssClass=k.configuration.processingCssClass;a(s).evolutionBookmark(j)}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.collapseexpand={setup:function(){},add:function(s,k){var j=a("<a></a>").attr({href:"#"}).text(k.collapsetext),c=false;j.click(function(){if(c){s.slideUp();j.text(k.collapsetext)}else{s.slideDown();j.text(k.expandtext)}c=!c;return false});s.removeClass().before(j).hide()}}})(jQuery);
(function(a){var s=function(k,j,c,g){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:k,ContentTypeId:j,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:false,dataType:"json",success:function(d){g.call(this,{count:d.TotalCount,latestLike:d.Likes.length>0?d.Likes[0]:null})}})};a.telligent.evolution.ui.components.like={setup:function(){a.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",
onList:function(k,j,c,g,d,n){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:k,ContentTypeId:j,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:d||20,PageIndex:n||0},cache:false,dataType:"json",success:function(l){g({likers:a.map(l.Likes,function(m){return{displayName:m.User.DisplayName,profileUrl:m.User.ProfileUrl,avatarUrl:m.User.AvatarUrl}}),hasMorePages:(l.PageIndex+1)*l.PageSize<l.TotalCount})}})},onOptions:function(k){k=a.telligent.evolution.ui.data(k);
return{contentId:k.contentid,contentTypeId:k.contenttypeid,typeId:k.configuration.LikeTypeId}},likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '})},add:function(k,j){var c=j.readonly==="true";a(k).evolutionLike({contentId:j.contentid,contentTypeId:j.contenttypeid,initialState:j.initialstate,initialMessage:j.initialmessage,initialCount:j.initialcount,
format:c?j.format.replace("{toggle}",""):j.format,typeId:j.configuration.LikeTypeId,onLike:function(g,d,n,l){var m={ContentId:g,ContentTypeId:d};if(n!==null&&n.length>0)m.TypeId=n;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:m,cache:false,dataType:"json",success:function(){s(g,d,n,l)}})},onUnlike:function(g,d,n,l){var m={ContentId:g};if(n!==null&&n.length>0)m.TypeId=n;a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",
data:m,cache:false,dataType:"json",success:function(){s(g,d,n,l)}})}})}}})(jQuery);
(function(a){var s=function(k,j,c){a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:k,ContentTypeId:j},cache:false,dataType:"json",success:function(g){c(g)}})};a.telligent.evolution.ui.components.moderate={setup:function(){},add:function(k,j){k=a(k);var c={contentId:j.contentid,contentTypeId:j.contenttypeid,supportsAbuse:j.supportsabuse==="true",initialState:j.initialstate==="true",onReport:s};if(j.configuration&&j.configuration.AdditionalLinks){var g=
a.parseJSON(j.configuration.AdditionalLinks);if(!c.supportsAbuse&&g.length===0)return;c.onGetAdditionalLinks=function(d){d(g)}}else if(j.configuration&&j.configuration.AdditionalLinksUrl){if(!c.supportsAbuse&&j.configuration.AdditionalLinksUrl.length===0)return;c.onGetAdditionalLinks=function(d){a.telligent.evolution.get({url:j.configuration.AdditionalLinksUrl,cache:false,dataType:"json",success:function(n){d(n.links||[])}})}}if(c.supportsAbuse||c.onGetAdditionalLinks){if(j.configuration&&j.configuration.LinkClassName)c.linkClassName=
j.configuration.LinkClassName;k.evolutionModerate(c)}}}})(jQuery);
(function(a){var s={};a.telligent.evolution.ui.components.page={setup:function(){},add:function(k,j){var c={currentPage:parseInt(j.currentpage,10),pageSize:parseInt(j.pagesize,10),totalItems:parseInt(j.totalitems,10),showPrevious:typeof j.configuration.ShowPrevious==="undefined"?false:j.configuration.ShowPrevious==="true",showNext:typeof j.configuration.ShowNext==="undefined"?false:j.configuration.ShowNext==="true",showFirst:typeof j.configuration.ShowFirst==="undefined"?true:j.configuration.ShowFirst===
"true",showLast:typeof j.configuration.ShowLast==="undefined"?true:j.configuration.ShowLast==="true",showIndividualPages:typeof j.configuration.ShowIndividualPages==="undefined"?true:j.configuration.ShowIndividualPages==="true",numberOfPagesToDisplay:typeof j.configuration.NumberOfPagesToDisplay==="undefined"?5:parseInt(j.configuration.NumberOfPagesToDisplay,10),pageKey:j.pagekey,hash:j.configuration.Target,baseUrl:j.configuration.BaseUrl||window.location.href,template:typeof j.configuration.Template!==
"undefined"?j.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
if(j.pagedcontenturl){s[j.pagedcontentpagingevent]={onPage:function(g,d){var n={};n[j.pagekey]=g;n=a.telligent.evolution.url.modify({url:j.pagedcontenturl,query:n});a.telligent.evolution.get({url:n,cache:false,success:function(l){d(l)}})}};a.extend(c,{onPage:function(g,d){s[j.pagedcontentpagingevent].onPage(g,d)},pagedContentContainer:"#"+j.pagedcontentwrapperid,pagedContentPagingEvent:j.pagedcontentpagingevent,pagedContentPagedEvent:j.pagedcontentpagedevent,transition:j.configuration.Transition,
transitionDuration:typeof j.configuration.TransitionDuration==="undefined"?200:parseInt(j.configuration.TransitionDuration,10)})}a(k).evolutionPager(c)}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.rate={setup:function(){},add:function(s,k){var j=a.extend({},{isReadOnly:k.readonly==="true",value:parseFloat(k.initialvalue),ratingCount:parseFloat(k.initialcount)});j.value*=a.fn.evolutionStarRating.defaults.maxRating;j.onRate=function(c){if(k.contentid&&k.contenttypeid){c/=a.fn.evolutionStarRating.defaults.maxRating;c={ContentId:k.contentid,ContentTypeId:k.contenttypeid,Value:c};if(k.ratingtypeid)c.TypeId=k.ratingtypeid;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ratings.json",data:c,success:function(){var g={ContentId:k.contentid};if(k.ratingtypeid)g.TypeId=k.ratingtypeid;a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:g,success:function(d){d&&d.RatedItem&&d.RatedItem.AverageValue?a(s).evolutionStarRating("option",{value:d.RatedItem.AverageValue*a.fn.evolutionStarRating.defaults.maxRating,ratingCount:d.RatedItem.Count}):a(s).evolutionStarRating("option",{value:0,ratingCount:0})}})}})}};
j.ratingCount==0&&j.isReadOnly||a(s).evolutionStarRating(j)}}})(jQuery);
(function(a){var s=a.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),k=function(j,c){a.telligent.evolution.get({url:j,dataType:"json",success:function(g){g&&c(s(g))}})};a.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(j,c){if(c.detailsurl){var g=null,d=j.find("ul.details"),n=d.html();j.bind("mouseenter",function(){g!==null?d.html(g):k(c.detailsurl,function(l){g=l;d.html(g)})}).bind("mouseleave",
function(){d.html(n)})}}}})(jQuery);
(function(a){var s=function(k,j,c){var g=a(c);g.html("");if(k){var d=true;a.each(k.split(/,/),function(n,l){var m=a.trim(l);if(m){if(d)d=false;else g.append(", ");j?g.append(a("<a>").attr("rel","nofollow tag").attr("href",j.replace(/{tag}/g,a.telligent.evolution.url.encodePathComponent(a.telligent.evolution.html.decode(m)))).text(m)):g.append(m)}})}};a.telligent.evolution.ui.components.tag={setup:function(){},add:function(k,j){var c=jQuery("<span></span>");a(k).append(c);s(j.tags,j.urlformat,c);var g=
null;if(j.readonly!=="true"){g=a('<a href="javascript:void(0);" class="internal-link edit-tags"></a>');a(k).append(g);g.evolutionInlineTagEditor({allTags:a.grep(j.selectabletags.split(","),function(d){return d}),currentTags:a.grep(j.tags.split(","),function(d){return d}),onSave:function(d,n){var l={Tags:d&&d.length>0?d.join(","):"",ContentId:j.contentid,ContentTypeId:j.contenttypeid};if(j.tagtypeid)l.TypeId=j.tagtypeid;a.telligent.evolution.put({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",
data:l,success:function(){s(l.Tags,j.urlformat,c);n()}})}})}}}})(jQuery);
(function(a){var s=function(){return{add:function(n,l,m,f,h,e){n={ContentId:n,ContentTypeId:l,Body:f};if(typeof m!=="undefined"&&m!==null)n.CommentTypeId=m;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:n,cache:false,success:h,error:e})},del:function(n,l,m){a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:n},cache:false,success:l,error:m})}}}(),k=function(n,l){a.telligent.evolution.get({url:n,
cache:false,success:function(m){l(m)}})},j=function(n){var l=n.content.find(".content-item.action.likes");a.telligent.evolution.messaging.subscribe("ui.like",function(m){if(m.contentId===n.contentId&&(typeof n.typeId==="undefined"||n.typeId===""||n.typeId==="00000000-0000-0000-0000-000000000000"||m.typeId===n.typeId))m.count>0?l.removeClass("without-likes").addClass("with-likes"):l.removeClass("with-likes").addClass("without-likes");else{var f=n.content.find('li.comment[data-commentid="'+m.contentId+
'"][data-contenttypeid="'+m.contentTypeId+'"]');m.count>0?f.addClass("with-likes"):f.removeClass("with-likes")}})},c=function(n){n.content.find(".internal-link.comment").bind("click",function(l){l.preventDefault();n.content.find(".comment-form").show().find("textarea").focus()});n.content.off("focus",".comment-form textarea").on("focus",".comment-form textarea",function(l){n.content.find(".comment-form").addClass("with-avatar");l=a(l.target);if(!l.data("theater_composer_inited")){l.data("theater_composer_inited",
true);l.evolutionComposer({plugins:["mentions","hashtags"]});l.evolutionComposer("onkeydown",function(m){if(m.which===13){m=a(m.target).evolutionComposer("val");if(a.trim(m).length>0){n.content.find(".comment-form textarea").attr("disabled",true).blur();s.add(n.contentId,n.contentTypeId,n.typeId,m,function(f){a.evolutionTheater.refresh(g);a.telligent.evolution.messaging.publish("activity.commentadded",f)},function(){n.content.find(".comment-form textarea").evolutionComposer("val","").trigger("keydown").trigger("keyup").removeAttr("disabled").closest(".comment-form").removeClass("with-avatar")})}}return true})}});
n.content.delegate(".comment-form textarea","blur",function(){n.content.find(".comment-form").removeClass("with-avatar")})},g=function(n,l){var m=a("<div></div>").html(l).find("ul.content-list.comments");n.find("ul.content-list.comments").replaceWith(m)},d=function(n){n.content.find(".content-item.comment").bind("evolutionModerateLinkClicked",function(){var l=a(this).data("commentid");s.del(l,function(m){a.evolutionTheater.refresh(g);a.telligent.evolution.messaging.publish("activity.commentremoved",
m)},function(){})})};a.telligent.evolution.ui.components.theater={setup:function(){},add:function(n,l){n=a(n);n.bind("click",function(m){m.preventDefault();a.evolutionTheater.show({content:function(f){k(l.theaterurl,f)},nextContent:function(f){var h=f.find("a[data-nexttheaterurl]").data("nexttheaterurl");if(h&&h.length>0)return function(e){k(h,e)}},previousContent:function(f){var h=f.find("a[data-previoustheaterurl]").data("previoustheaterurl");if(h&&h.length>0)return function(e){k(h,e)}},loaded:function(f){var h=
f;h=a(h);f=h.find(".activity-story");h={content:h,story:f};f!==null&&a.extend(h,{contentId:f.data("contentid"),contentTypeId:f.data("contenttypeid"),typeId:f.data("typeid")});j(h);c(h);d(h)}})})}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.webpreview={setup:function(){},add:function(s,k){var j={url:k.configuration.url,success:function(c){if(c){c=a.telligent.evolution.preview.render(c,{template:a.telligent.evolution.preview.defaults.template});typeof c!=="undefined"&&c!==null&&c.length>0&&s.replaceWith(c)}}};if(typeof k.configuration.maximagewidth!=="undefined")j.maxImageWidth=k.configuration.maximagewidth;if(typeof k.configuration.maximageheight!=="undefined")j.maxImageHeight=k.configuration.maximageheight;
a.telligent.evolution.preview.load(j.url,{maxImageWidth:j.maxImageWidth,maxImageHeight:j.maxImageHeight,success:j.success})}}})(jQuery);
(function(a,s){var k=function(g,d,n,l,m){if(!g)return g;var f=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(g);return g.replace(d,function(h,e,b){if(h==" ")return n;else if(h=="."&&!f&&b!=g.length-1&&g.substr(b+1,1)!=".")return l;else{e=[];e[e.length]=m;for(b=0;b<h.length;b++){var r=h.charCodeAt(b).toString(16)+"",q=r.length;if(q==4){e.push(r.substr(2,2).toUpperCase());e.push(r.substr(0,2).toUpperCase())}else if(q==3){e.push(r.substr(1,2).toUpperCase());e.push("0");e.push(r.substr(0,1).toUpperCase())}else if(q==
2){e.push(r.toUpperCase());e.push("00")}}e[e.length]=m;return e.join("")}})},j=function(g,d,n,l){if(!g)return g;return g.replace(d,function(m){if(m.length==1)if(m==n)return" ";else{if(m==l)return"."}else{m=m.substr(1,m.length-2);if(m.length%4!=0)return"";for(var f=[],h=0;h<m.length;h+=4)f[f.length]=String.fromCharCode(parseInt(m.substr(h+2,2)+m.substr(h,2),16));return f.join("")}})},c={parseQuery:function(g){var d=g.split("?"),n={};g=(d.length>1?d[1]:g).split("#")[0].split("&");a.each(g,function(l,
m){m=m.split("=");if(m.length===2)n[m[0]]=decodeURIComponent(m[1].replace(/\+/gi," "))});return n},serializeQuery:function(g){g=g||{};var d=[];a.each(g,function(n,l){d[d.length]=encodeURIComponent(n)+"="+encodeURIComponent(l)});return d.join("&")},modify:function(g){g=a.extend({url:s.location.href,query:null,hash:s.location.hash,protocol:s.location.protocol},g);var d=[g.url.split("?")[0].split("#")[0]],n;if(typeof g.query==="string")g.query=c.parseQuery(g.query);if((n=c.serializeQuery(a.extend(c.parseQuery(g.url),
g.query)))&&n.length>0)d[d.length]="?"+n;if(g.hash&&g.hash.length>0)d[d.length]=(g.hash.indexOf("#")!==0?"#":"")+g.hash;return d.join("")},hashData:function(g,d){if(typeof g==="undefined"){g={};var n=s.location.href.split("#"),l="";if(n.length>2){a.each(n,function(m,f){if(m>0){if(m>1)l+="#";l+=f}});n=[n[0],l]}if(n.length===2)g=c.parseQuery(n[1]);return g}else{d||(g=a.extend(c.hashData(),g));s.location.href=s.location.href.split("#")[0]+"#"+c.serializeQuery(g)}},encode:function(g){return encodeURIComponent(g)},
decode:function(g){return decodeURIComponent(g)},encodePathComponent:function(g){return k(g,/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(g){return j(g,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(g){return k(g,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(g){return j(g,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,"-",".")}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution=
{};a.telligent.evolution.url=c})(jQuery,window);
(function(a){var s={},k=function(g){return this.each(function(){var d={settings:a.extend({},a.fn.evolutionUserFileTextBox.defaults,g||{}),internal:{state:this,preview:null,select:null,remove:null}},n=a("<div></div>").attr("class",d.settings.cssClass);d.internal.preview=a("<div></div>").attr("class",d.settings.previewCssClass);n.append(d.internal.preview);d.internal.select=a('<input type="button" />').val(d.settings.selectText).click(function(){j(d);return false});n.append(d.internal.select);d.internal.remove=
a('<input type="button" />').val(d.settings.removeText).click(function(){d.internal.preview.html(d.settings.noFileText);a(d.internal.state).val("");return false});n.append(d.internal.remove);a(this).val()?d.internal.preview.html(d.settings.initialPreviewHtml):d.internal.preview.html(d.settings.noFileText);a(this).data("evolutionUserFileTextBox",d).before(n).hide()})},j=function(g){var d=g.settings.userFilesBrowseModalUrl;if(d.substr(0,2)=="~/")d=a.telligent.evolution.site.getBaseUrl()+d.substr(2);
if(window.Telligent_Modal)window.Telligent_Modal.Open(d,620,450,function(n){c(g,n)});else a.glowModal&&a.glowModal(d,{width:620,height:450,onClose:function(n){c(g,n)}})},c=function(g,d){if(d&&d.length==3&&d[0]&&d[1]){g.internal.preview.html(d[2]);a(g.internal.state).val(d[1])}};a.fn.evolutionUserFileTextBox=function(g){if(g in s)return s[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return k.apply(this,arguments);else a.error("Method "+g+" does not exist on jQuery.fn.evolutionUserFileTextBox")};
a.extend(a.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",userFilesBrowseModalUrl:"~/utility/userfilesbrowse.aspx"}})})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.validation={registerExtensions:function(s){if(a.validator){a.validator.addMethod("passwordvalid",function(k,j){return this.optional(j)||k.match(s.passwordRegex)},s.passwordInvalidMessage);a.validator.addMethod("email",function(k,j){return this.optional(j)||k.match(RegExp(s.emailRegex))},s.emailInvalidMessage);a.validator.addMethod("url",function(k,j){if(this.optional(j))return true;
if(k.match(s.urlRegex))return true;if(("http://"+k).match(s.urlRegex)){a(j).val("http://"+k);return true}return false},s.urlInvalidMessage);a.validator.addMethod("emails",function(k,j){for(var c=k.split(/[;,]/),g=true,d=RegExp(s.emailRegex),n=0;n<c.length;n++)jQuery.trim(c[n]).match(d)||(g=false);return this.optional(j)||g},s.emailsInvalidMessage);a.validator.addMethod("username",function(k,j){return this.optional(j)||k.match(s.usernameRegex)},s.usernameInvalidMessage);a.validator.addMethod("usernameexists",
function(k,j,c){if(this.optional(j))return"dependency-mismatch";var g=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});g.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=g.message;c=typeof c=="string"&&{url:c}||c;var d=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";if(c.url)d=c.url;if(g.old!==k){g.old=k;var n=this;this.startRequest(j);var l='{"username":"'+k+'","elementName":"'+
j.name+'"}';a.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(m){j=n.findByName(m.d.ElementName)[0];n.settings.messages[j.name].remote=g.originalMessage;var f=m.d.IsValid===true;if(f){var h=n.formSubmitted;n.prepareElement(j);n.formSubmitted=h;n.successList.push(j);n.showErrors()}else{h={};m=g.message=m.d.ErrorMessage||n.defaultMessage(j,"usernameexists");h[j.name]=a.isFunction(m)?l(k):m;n.showErrors(h)}g.valid=f;n.stopRequest(j,
f)}});return"pending"}else if(this.pending[j.name])return"pending";return g.valid},undefined);a.validator.addMethod("emailexists",function(k,j,c){if(this.optional(j))return"dependency-mismatch";var g=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});g.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=g.message;c=typeof c=="string"&&{url:c}||c;var d=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";
if(c.url)d=c.url;if(g.old!==k){g.old=k;var n=this;this.startRequest(j);var l='{"email":"'+k+'","elementName":"'+j.name+'"}';a.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(m){j=n.findByName(m.d.ElementName)[0];n.settings.messages[j.name].remote=g.originalMessage;var f=m.d.IsValid===true;if(f){var h=n.formSubmitted;n.prepareElement(j);n.formSubmitted=h;n.successList.push(j);n.showErrors()}else{h={};m=g.message=m.d.ErrorMessage||
n.defaultMessage(j,"emailexists");h[j.name]=a.isFunction(m)?l(k):m;n.showErrors(h)}g.valid=f;n.stopRequest(j,f)}});return"pending"}else if(this.pending[j.name])return"pending";return g.valid},undefined);a.validator.addMethod("groupnameexists",function(k,j,c){if(this.optional(j))return"dependency-mismatch";var g=encodeURIComponent(a.trim(k));if(g.length==0)return true;var d=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});d.originalMessage=this.settings.messages[j.name].remote;
this.settings.messages[j.name].remote=d.message;c=c.getParentId();g='{"groupName":"'+g+'","parentGroupId":'+c+',"elementName":"'+j.name+'"}';if(d.old!==g){d.old=g;var n=this;this.startRequest(j);c=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";a.telligent.evolution.post({url:c,dataType:"json",contentType:"application/json; charset=utf-8",data:g,success:function(l){j=n.findByName(l.d.ElementName)[0];n.settings.messages[j.name].remote=d.originalMessage;
var m=l.d.IsValid===true;if(m){var f=n.formSubmitted;n.prepareElement(j);n.formSubmitted=f;n.successList.push(j);n.showErrors()}else{f={};l=d.message=l.d.ErrorMessage||n.defaultMessage(j,"groupnameexists");f[j.name]=a.isFunction(l)?message(k):l;n.showErrors(f)}d.valid=m;n.stopRequest(j,m)}});return"pending"}else if(this.pending[j.name])return"pending";return d.valid},undefined);a.validator.addMethod("wikipageexists",function(k,j,c){if(this.optional(j))return"dependency-mismatch";var g=encodeURIComponent(a.trim(k));
if(g.length==0)return true;var d=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});d.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=d.message;c='{"pageName":"'+g+'","wikiId":'+c.wikiId+',"pageId":'+c.pageId+',"parentPageId":'+c.parentPageId()+',"elementName":"'+j.name+'"}';if(d.old!==c){d.old=c;var n=this;this.startRequest(j);g=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";
a.telligent.evolution.post({url:g,dataType:"json",contentType:"application/json; charset=utf-8",data:c,success:function(l){j=n.findByName(l.d.ElementName)[0];n.settings.messages[j.name].remote=d.originalMessage;var m=l.d.IsValid===true;if(m){var f=n.formSubmitted;n.prepareElement(j);n.formSubmitted=f;n.successList.push(j);n.showErrors()}else{f={};l=d.message=l.d.ErrorMessage||n.defaultMessage(j,"wikipageexists");f[j.name]=a.isFunction(l)?message(k):l;n.showErrors(f)}d.valid=m;n.stopRequest(j,m)}});
return"pending"}else if(this.pending[j.name])return"pending";return d.valid},undefined);a.validator.addMethod("mailinglistnameexists",function(k,j,c){if(a.trim(k)=="")return this.optional(j);var g=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});g.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=g.message;c=typeof c=="string"&&{url:c}||c;var d=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";
if(c.url)d=c.url;if(g.old!==k){g.old=k;var n=this;this.startRequest(j);var l='{"mailingListName":"'+k+'","elementName":"'+j.name+'"}';a.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(m){j=n.findByName(m.d.ElementName)[0];n.settings.messages[j.name].remote=g.originalMessage;var f=m.d.IsValid===true;if(f){var h=n.formSubmitted;n.prepareElement(j);n.formSubmitted=h;n.successList.push(j);n.showErrors()}else{h={};m=g.message=m.d.ErrorMessage||
n.defaultMessage(j,"mailinglistnameexists");h[j.name]=a.isFunction(m)?l(k):m;n.showErrors(h)}g.valid=f;n.stopRequest(j,f)}});return"pending"}else if(this.pending[j.name])return"pending";return g.valid},undefined)}}}})(jQuery,window);
(function(a){var s={addField:function(f,h,e,b){var r=this.data("evolutionValidation");if(typeof r!=="undefined"){r.internal.fields[r.internal.fields.length]={selector:f,messageSelector:e,isValid:true,context:b,initialized:false};f=a(f);f.data("_evolutionValidation",r).data("_evolutionValidationFieldIndex",r.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",h);try{f.keydown(function(){if(r.internal.hasAttemptedSubmit){window.clearTimeout(r.internal.keyPressValidationHandle);
var o=this;r.internal.keyPressValidationHandle=window.setTimeout(function(){g(r,a(o))},499)}})}catch(q){}f.blur(function(){g(r,a(this))})}return this},addCustomValidation:function(f,h,e,b,r){var q=this.data("evolutionValidation");if(typeof q!=="undefined"){var o=q.internal.customValidations.length;q.internal.customValidations[o]={id:f,validationFunction:h,message:e,messageSelector:b,isValid:true,context:r,initialized:false};return function(){return n(q,o)}}},isValid:function(){for(var f=this.data("evolutionValidation"),
h=0;h<f.internal.fields.length;h++)f.internal.fields[h].initialized||g(f,a(f.internal.fields[h].selector));for(h=0;h<f.internal.customValidations.length;h++)f.internal.customValidations[h].initialized||n(f,h);return c(f)},validate:function(){for(var f=this.data("evolutionValidation"),h=0;h<f.internal.fields.length;h++)g(f,a(f.internal.fields[h].selector));for(h=0;h<f.internal.customValidations.length;h++)n(f,h);return s.isValid.apply(a(f.internal.state),[])},validateField:function(f){try{var h=this.data("evolutionValidation");
a(f).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");return g(h,a(f))}catch(e){}},validateCustom:function(f){for(var h=this.data("evolutionValidation"),e=0;e<h.internal.customValidations.length;e++)if(h.internal.customValidations[e].id==f)return n(h,e);return true},reset:function(){for(var f=this.data("evolutionValidation"),h=0;h<f.internal.customValidations.length;h++){a(f.internal.customValidations[h].messageSelector).hide();f.internal.customValidations[h].isValid=true;f.internal.customValidations[h].initialized=
false}for(h=0;h<f.internal.fields.length;h++){a(f.internal.fields[h].messageSelector).hide();f.internal.fields[h].errorMessage=null;f.internal.fields[h].isValid=true;f.internal.fields[h].initialized=false;a(f.internal.fields[h].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$")}f.internal.submitButtonClicked=false;f.internal.hasAttemptedSubmit=false;window.clearTimeout(f.internal.initialValidationHandle);f.internal.initialValidationHandle=window.setTimeout(function(){j(f)},249)}},k=function(f){return this.each(function(){var h=
{settings:a.extend({},a.fn.evolutionValidation.defaults,f||{}),internal:{state:this,submitButtonClicked:false,hasAttemptedSubmit:false,fields:[],customValidations:[],initialValidationHandle:null}};a(this).data("evolutionValidation",h);a(this).click(function(e){return l(h,e)});this._isValid=function(){return l(h,{})};window.clearTimeout(h.internal.initialValidationHandle);h.internal.initialValidationHandle=window.setTimeout(function(){j(h)},499)})},j=function(f){window.clearTimeout(f.internal.initialValidationHandle);
try{var h=false;if(f.settings.validateOnLoad===true)h=true;else if(f.settings.validateOnLoad!==false)for(var e=0;e<f.internal.fields.length;e++){var b=a(f.internal.fields[e].selector),r=b.attr("type");if(r!="checkbox"&&r!="radio"&&r!="select"&&r!="submit"&&r!="button"&&r!="reset"&&d(f,b)!=""){h=true;break}}if(h){f.internal.hasAttemptedSubmit=true;var q=s.validate.apply(a(f.internal.state));m(f);f.settings.onValidated&&f.settings.onValidated(q,false,null)}else f.internal.hasAttemptedSubmit||f.settings.onValidated&&
f.settings.onValidated(true,false,null)}catch(o){f.internal.initialValidationHandle=window.setTimeout(function(){j(f)},499)}},c=function(f){for(var h=0;h<f.internal.fields.length;h++)if(!f.internal.fields[h].isValid)return false;for(h=0;h<f.internal.customValidations.length;h++)if(!f.internal.customValidations[h].isValid)return false;return true},g=function(f,h){var e=d(f,h);if(e!=h.data("_evolutionValidationOldValue")){h.data("_evolutionValidationOldValue",e);return h.valid()}else{e=h.data("_evolutionValidationFieldIndex");
if(e<0||e>=f.internal.fields.length)return false;return f.internal.fields[e].isValid}},d=function(f,h){return h.attr("type")=="checkbox"||h.attr("type")=="radio"?h.get(0).checked?h.val():"":h.val()},n=function(f,h){if(h<0||h>=f.internal.customValidations.length)return true;var e=f.internal.customValidations[h].validationFunction();f.internal.customValidations[h].initialized=true;if(e===true){f.internal.customValidations[h].isValid=true;a(f.internal.customValidations[h].messageSelector).hide();c(f)&&
f.internal.hasAttemptedSubmit&&f.settings.onValidated&&f.settings.onValidated(true,f.internal.submitButtonClicked,f.internal.customValidations[h].context);return true}else{e=c(f);f.internal.customValidations[h].isValid=false;f.internal.hasAttemptedSubmit&&a(f.internal.customValidations[h].messageSelector).html(f.internal.customValidations[h].message).show();if((f.internal.submitButtonClicked||e)&&f.internal.hasAttemptedSubmit&&f.settings.onValidated)f.settings.onValidated(false,f.internal.submitButtonClicked,
f.internal.customValidations[h].context);return false}},l=function(f,h){var e=!f.internal.hasAttemptedSubmit;f.internal.hasAttemptedSubmit=true;f.internal.submitButtonClicked=true;s.validate.apply(a(f.internal.state),[]);var b=s.isValid.apply(a(f.internal.state),[]);e&&!b&&m(f);e=true;if(b&&f.settings.onSuccessfulClick)e=f.settings.onSuccessfulClick(h);f.internal.submitButtonClicked=false;if(!b&&h){h.cancelBubble=true;h.returnValue=false}return b&&e!==false},m=function(f){for(var h=0;h<f.internal.fields.length;h++)if(!f.internal.fields[h].isValid&&
f.internal.fields[h].errorMessage!=null){a(f.internal.fields[h].messageSelector).html(f.internal.fields[h].errorMessage).show();f.internal.fields[h].errorMessage=null}for(h=0;h<f.internal.customValidations.length;h++)f.internal.customValidations[h].isValid||a(f.internal.customValidations[h].messageSelector).html(f.internal.customValidations[h].message).show()};a.fn.evolutionValidation=function(f){if(f in s)return s[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||
!f)return k.apply(this,arguments);else a.error("Method "+f+" does not exist on jQuery.fn.evolutionValidation")};a.extend(a.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null}});a(document).ready(function(){a("form").validate({errorPlacement:function(f,h){var e=a(h).data("_evolutionValidation");if(e){var b=parseInt(a(h).data("_evolutionValidationFieldIndex"),10);if(!(b<0||b>=e.internal.fields.length))if(e.internal.hasAttemptedSubmit)a(e.internal.fields[b].messageSelector).html(f).show();
else e.internal.fields[b].errorMessage=f}},highlight:function(f){var h=a(f).data("_evolutionValidation");if(h){var e=c(h);f=a(f).data("_evolutionValidationFieldIndex");if(!(f<0||f>=h.internal.fields.length)){h.internal.fields[f].isValid=false;h.internal.fields[f].initialized=true;if((h.internal.submitButtonClicked||e)&&h.internal.hasAttemptedSubmit&&h.settings.onValidated)h.settings.onValidated(false,h.internal.submitButtonClicked,h.internal.fields[f].context)}}},unhighlight:function(f){var h=a(f).data("_evolutionValidation");
if(h){f=a(f).data("_evolutionValidationFieldIndex");if(!(f<0||f>=h.internal.fields.length)){h.internal.fields[f].isValid=true;h.internal.fields[f].initialized=true;c(h)&&h.internal.hasAttemptedSubmit&&h.settings.onValidated&&h.settings.onValidated(true,h.internal.submitButtonClicked,h.internal.fields[f].context)}}},onsubmit:false,onkeyup:false,onfocusout:false})})})(jQuery);
function Telligent_Validation(a,s){this._jq=$(a);if(s.onValidatedFunction)s.onValidated=s.onValidatedFunction;if(s.onSuccessfulClickFunction)s.onSuccessfulClick=s.onSuccessfulClickFunction;this._jq.evolutionValidation(s)}Telligent_Validation.prototype.AddField=function(a,s,k,j){this._jq.evolutionValidation("addField",a,s,k,j)};Telligent_Validation.prototype.AddCustomValidation=function(a,s,k,j,c){return this._jq.evolutionValidation("addCustomValidation",a,s,k,j,c)};
Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};
