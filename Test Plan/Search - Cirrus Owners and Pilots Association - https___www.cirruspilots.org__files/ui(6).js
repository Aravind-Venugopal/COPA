(function(n){namespace("$.couto.mediamagnificent.widgets");var t=n("body");t.bind("closeMediaPostModals.couto.mediaMagnificent",function(){t.trigger("closeMediaPostModalForFile.couto.mediaMagnificent").trigger("closeMediaPostModalForPhoto.couto.mediaMagnificent").trigger("closeMediaPostModalForVideo.couto.mediaMagnificent")});n.couto.mediamagnificent.widgets.mediaPostModalVideo={register:function(t){var u=n.couto.mediamagnificent.mediaPostModal,f=n.couto.mediamagnificent.mediaPostCarousel,i=n("#"+t.containerId),r=n(t.listSelector,i),e=f({resources:{Label_Comments:t.Label_Comments,Label_Comment:t.Label_Comment},widget:i,list:r,relatedMediaActions:n(".related-media-actions",i),relatedMediaContent:n(".related-media-content",i),relatedMediaActionsVerticalPlaceholder:n(".related-media-actions-vertical-placeHolder",i),container:r.closest(".content-list-container"),previousButton:n(t.previousButtonSelector,i),nextButton:n(t.nextButtonSelector,i),itemTemplate:n.template(n(t.templateSelector)),pathToTheStars:n.telligent.evolution.site.getBaseUrl()+"Utility/images/small-stars/",countPerViewport:t.countPerViewport,orientation:"Horizontal",autoSetOrientation:!1,useResponsiveWidth:!0});u.init(t,e)}};n.couto.mediamagnificent.widgets.mediaPostModalFile={register:function(t){var u=n.couto.mediamagnificent.mediaPostModal,f=n.couto.mediamagnificent.mediaPostCarousel,i=n("#"+t.containerId),r=n(t.listSelector,i),e=f({resources:{Label_Comments:t.Label_Comments,Label_Comment:t.Label_Comment},widget:i,list:r,relatedMediaActions:n(".related-media-actions",i),relatedMediaContent:n(".related-media-content",i),relatedMediaActionsVerticalPlaceholder:n(".related-media-actions-vertical-placeHolder",i),container:r.closest(".content-list-container"),previousButton:n(t.previousButtonSelector,i),nextButton:n(t.nextButtonSelector,i),itemTemplate:n.template(n(t.templateSelector)),pathToTheStars:n.telligent.evolution.site.getBaseUrl()+"Utility/images/small-stars/",countPerViewport:t.countPerViewport,orientation:"Horizontal",autoSetOrientation:!1,useResponsiveWidth:!0});u.init(t,e)}};n.couto.mediamagnificent.widgets.mediaPostModalPhoto={register:function(t){if(n.couto.mediamagnificent.mediaPostModal.init(t),t.useAutoDetection&&t.applicationTypeId){n.expr[":"].noparents=function(t,i,r){return n(t).parents(r[3]).length<1};var i="/__key/telligent-evolution-components-attachments/"+t.applicationTypeId,r="/__key/communityserver-components-imagefileviewer/telligent-evolution-components-attachments-"+t.applicationTypeId,u=n('img[src*="'+i+'"], img[src*="'+r+'"]').filter(':noparents([data-container-for="FeatureItFeaturedItem"])');u.length>0&&u.each(function(){var u=n(this),f=u.attr("src").match(/telligent-evolution-components-attachments[\/-](\d+)-(\d+)-([\d-]+)/),e=parseInt(f[2],10),o=parseInt(f[3].replace(/-/g,""),10),t=u.parent();t.attr("href")?(t.attr("href").indexOf(i)>=0||t.attr("href").indexOf(r)>=0)&&t.attr("href","javascript:void(0)").attr("data-experience","Photo").attr("data-mediaid",o).attr("data-galleryid",e).attr("data-groupid",""):u.wrap(n("<a />",{href:"javascript:void(0)","class":"media-link","data-experience":"Photo","data-mediaid":o,"data-galleryid":e,"data-groupid":""}))})}}}})(jQuery);