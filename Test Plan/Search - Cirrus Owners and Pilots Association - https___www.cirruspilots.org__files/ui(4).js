(function(n){var r=n(window),t=[window.location.href],i=0;n.event.special.directedHashChange={setup:function(n){var u=n.customComparer;r.bind("hashchange",function(){var f,n=0;!u||(n=u(t[t.length-1],window.location.href),i=t.length,t.push(window.location.href));f=n!==0?n<0:t.length>=2&&t[i-1]===window.location.href;n!==0&&(f?i--:(i++,i===t.length&&t.push(window.location.href)));r.trigger("directedHashChange",{direction:f?"backward":"forward",hash:window.location.href})})}}})(jQuery),function(n){var t=function(n){return n===null||n===""},i="_filterSelctor_inited",f=function(t,i){return t=n(t),{name:t.attr(i.nameAttribute),value:t.find("li.navigation-item.selected").attr(i.valueAttribute),visible:t.find("li.navigation-item:visible").length-1}},r=function(i,r,u){i=n(i);var s=i.attr(u.nameAttribute),e=i.find("li.navigation-item.selected"),f=e.attr(u.valueAttribute),h=i.find("["+u.valueAttribute+"='"+r+"']"),o=!1;e.length>0&&f!==r&&(e.removeClass(u.selectedClass),t(f)||(i.trigger(u.removeFilterEventName,{name:s,value:f}),o=!0));h.addClass(u.selectedClass);t(r)||r===f||(i.trigger(u.addFilterEventName,{name:s,value:r,displayName:h.find("span.navigation-item-title").html()}),o=!0);o&&i.trigger(u.changeFilterEventName)},e=function(t){if(!this.data(i)){this.data(i,!0);var u=n.fn.filterSelector.defaults,f=this.selector;n(f+" li.navigation-item a").live("click",function(t){var i=n(t.target);return r(i.closest("div.search-filter"),i.closest("li").attr(u.valueAttribute),u),!1});n(f+" .navigation-list-footer a").live("click",function(i){var u=n(i.target).closest("div.search-filter").find("li:hidden"),r;return u.slice(0,3).each(function(){n(this).slideDown(200)}),r=u.length-3,r<=0?n(i.target).slideUp(200):n(i.target).html(t.viewMoreText.replace(/\{0\}/gi,r)),!1})}return this},u={val:function(t){var i=n.fn.filterSelector.defaults;return typeof t!="undefined"&&r(this,t,i),f(this,i)}};n.fn.filterSelector=function(n){return n in u?u[n].apply(this,Array.prototype.slice.call(arguments,1)):typeof n=="object"||!n?e.apply(this,arguments):this};n.extend(n.fn.filterSelector,{defaults:{selectedClass:"selected",addFilterEventName:"filterAdd",removeFilterEventName:"filterRemove",changeFilterEventName:"filterChange",nameAttribute:"data-filtername",valueAttribute:"data-filtervalue"}})}(jQuery),function(n){var i=n.browser.webkit||n.browser.mozilla,r=function(n){if(n.find("a").remove().end().css({overflow:"hidden",whiteSpace:"nowrap"}),i)n.animate({opacity:0,width:0,paddingLeft:0,paddingRight:0},300,function(){var i=n.parent();n.remove();t(i.find("span.breadcrumb-item"),i.parent().find("div.breadcrumb-list-header"))});else{var r=n.parent();n.remove();t(r.find("span.breadcrumb-item"),r.parent().find("div.breadcrumb-list-header"))}},f=function(r,u,f){var e=n('<span class="breadcrumb-item" '+r.nameAttribute+'="'+f.name+'" '+r.valueAttribute+'="'+f.value+'"><span>'+f.displayName+'<\/span><a href="#">x<\/a><\/span>');e.css({opacity:0}).appendTo(u);t(e.parent().find("span.breadcrumb-item"),u.parent().find("div.breadcrumb-list-header"));i?e.animate({opacity:1},300):e.css({opacity:1})},e=function(t){var i=n.extend({},n.fn.tagList.defaults,t||{});return n(this.selector+" a").live("click",function(t){var u=n(t.target).closest("span"),f=u.attr(i.nameAttribute);return r(u),n(document).trigger(i.tagRemovedEvent,f),!1})},t=function(t,i){t.length>0?(i.show(),n(".search-result-list div.breadcrumb-list-wrapper").show()):(i.hide(),n(".search-result-list div.breadcrumb-list-wrapper").hide());t.each(function(t){n(this).css({position:"relative",zIndex:100-t})})},u={addTag:function(t){return f(n.fn.tagList.defaults,this.find("div.breadcrumb-list"),t),this},removeTag:function(t){return this.find("span.breadcrumb-item["+n.fn.tagList.defaults.nameAttribute+'="'+t+'"]').each(function(){r(n(this))}),this}};n.fn.tagList=function(n){return n in u?u[n].apply(this,Array.prototype.slice.call(arguments,1)):typeof n=="object"||!n?e.apply(this,arguments):this};n.fn.tagList.defaults={tagRemovedEvent:"tagRemove",nameAttribute:"data-filtername",valueAttribute:"data-filtervalue"}}(jQuery),function(n){var t=n.browser.webkit||n.browser.mozilla,b=function(i){i.contentWrapper.css({position:"relative"});i.overlay=n("<div><\/div>").css({backgroundColor:"#fff",position:"absolute",width:i.contentWrapper.width()+"px",height:i.contentWrapper.height()+"px",top:"0px",zIndex:1e3,opacity:0,cursor:"default"}).appendTo(i.contentWrapper);t?i.overlay.animate({opacity:.3},200):i.overlay.css({opacity:.3})},o=function(n){!n.overlay||(t?n.overlay.animate({opacity:0},{duration:200,complete:function(){n.overlay.hide()}}):n.overlay.css({opacity:0}).hide())},u=function(t,i,r){var e=i.sort||"",u={};n.each(i,function(n,t){n.indexOf("pi")===0?u[n]=t:u["w_"+n]=t});n.telligent.evolution.get({url:t.searchUrl,data:u,success:function(u){o(t);c(t,u,r);f(t);v(t,i);n(t.searchSortSelect).val(e)}})},r=function(n,t,i){var r=n.contentWrapper.find(t),u=n.resultHolder.find(t);r.html()!==u.html()&&(u.hide().insertAfter(r),i?r.glowTransition(u,i):(r.remove(),u.show()))},s=function(t,i){var r=n(i);return n(".breadcrumb-item",t).each(function(){var t=n(this);n('div.search-filter[data-filtername="'+t.attr("data-filtername")+'"] li',r).length===0&&t.remove()}),t},h=function(t,i,r){tagFiltersB=s(i,r);var o=n(r),u={},f={},e=!0;return(n(".breadcrumb-item",t).each(function(){var t=n(this);u[t.attr("data-filtername")]=t.attr("data-filtervalue")}),n(".breadcrumb-item",tagFiltersB).each(function(){var t=n(this);f[t.attr("data-filtername")]=t.attr("data-filtervalue")}),n.each(u,function(n){if(typeof f[n]=="undefined"||u[n]!==f[n])return e=!1,!1}),!e)?e:(n.each(f,function(n){if(typeof u[n]=="undefined"||f[n]!==u[n])return e=!1,!1}),e)},c=function(i,u,f){var e;if(f.animate){var o=n(i.tags),s=n(u).find(".breadcrumb-list-wrapper"),c=h(o,s,u);c||o.replaceWith(s);i.resultHolder.html(u);r(i,"div.search-facet-filters");r(i,"div.search-results",t?{duration:300,type:f.direction,resize:!1}:null);r(i,"div.filter-data",{duration:200,type:"slideUp",resize:!1});i.contentWrapper.find("div.search-facet-filters .navigation-list").length==0?i.contentWrapper.find("div.filter-heading-wrapper").slideUp(200):i.contentWrapper.find("div.filter-heading-wrapper").slideDown(200)}else e=n(u),n(".post-metadata .details .property-item.type",e).each(function(){var t=n(this),i=t.text();i&&i.indexOf("/")>-1&&t.text("embed")}),i.contentWrapper.html(e),i.contentWrapper.find("div.search-facet-filters .navigation-list").length==0&&i.contentWrapper.find("div.filter-heading-wrapper").slideUp(0)},l=function(t){var i={q:n(t.searchTextInput).val(),sort:n(t.searchSortSelect).val(),defaultAskForumId:t.defaultAskForumId};return i[t.pageIndexQueryStringKey]=1,n(t.filters).each(function(){var t=n(this).filterSelector("val");!t.value||(i[t.name]=t.value,i[t.name+"Visible"]=t.visible)}),i},a=function(t,i){var f="",u={current:t.currentDate,weekAgo:t.weekAgoDate,monthAgo:t.monthAgoDate,yearAgo:t.yearAgoDate},r=function(t,i){f.length>0&&(f+="&");f+=t+"="+n.telligent.evolution.url.encode(i)};return n.each(i,function(n,t){n==="q"?r("q",t):n==="category"?r("category",t):n==="group"?r("groups",t):n==="author"?r("users",t):n==="tag"?r("tags",t):n==="date"?t==="past_week"?(r("sdate",u.weekAgo),r("edate",u.current)):t==="past_month"?(r("sdate",u.monthAgo),r("edate",u.current)):t==="past_year"&&(r("sdate",u.yearAgo),r("edate",u.current)):n==="sort"&&r("sort",t)}),f},v=function(t,i){var u=a(t,i),r=t.searchRssUrl.replace(/QUERY/,u);n(t.rssLink).attr("href",r);n("head").find('link[type="application/rss+xml"]').remove().end().append('<link rel="alternate" type="application/rss+xml" title="'+t.searchRssTitle+'" href="'+r+'">')},i=function(t){var i=l(t);n.telligent.evolution.url.hashData(i,!0)},y=function(t){n.telligent.evolution.post({url:n.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/{ForumId}/threads.json",data:{ForumId:n(t.askForum).val(),Subject:n(t.askTitle).evolutionComposer("val"),Body:n(t.askBody).evolutionComposer("val"),IsQuestion:!0},success:function(n){window.location=n.Thread.Url}})},f=function(t){n(t.askBody).one("focus",function(){n(this).evolutionComposer({plugins:["mentions","hashtags"]})});n(t.askTitle).one("focus",function(){n(this).evolutionComposer({plugins:["hashtags"]})});n(t.askSubmit).evolutionValidation({onValidated:function(i){i?n(t.askSubmit).removeClass("disabled"):n(t.askSubmit).addClass("disabled")},onSuccessfulClick:function(i){i.preventDefault();n(i.target).addClass("disabled").attr("disabled","disabled");y(t)}}).evolutionValidation("addField",t.askBody,{required:!0},n(t.askBody).closest(".field-item").find(".field-item-validation"),null).evolutionValidation("addField",t.askTitle,{required:!0},n(t.askTitle).closest(".field-item").find(".field-item-validation"),null)},p=function(t){n(t.askFormLink).live("click",function(){var i=n(this);return n.telligent.evolution.get({url:t.askFormUrl,data:{w_query:i.attr("data-querytext"),w_fieldFilters:i.attr("data-fieldfilter"),w_dateRangeFilters:i.attr("data-datefilter"),w_defaultAskForumId:t.defaultAskForumId},success:function(i){n(t.askFormLink).slideUp(200);n(t.askFormWrapper).hide().html(i).css({width:500}).slideDown(200);f(t)}}),!1})},e=function(){var t=n.telligent.evolution.url.hashData();return typeof t.ctypes!="undefined"&&(t.ctypes.indexOf(",")<0&&(t.category=t.ctypes),delete t.ctypes),typeof t.users=="undefined"||t.q||(t.q="user:"+t.users,delete t.users),t},w={register:function(r){r.contentWrapper=n(r.contentWrapper);r.resultHolder=n(r.resultHolder);u(r,e(),{animate:!1});n(r.tags).tagList();n(r.filters).filterSelector({viewMoreText:r.viewMoreText});n(window).bind("directedHashChange",{customComparer:function(t,i){return(t=n.telligent.evolution.url.parseQuery(t),i=n.telligent.evolution.url.parseQuery(i),typeof t[r.pageIndexQueryStringKey]!="undefined"&&typeof i[r.pageIndexQueryStringKey]!="undefined")?Number(t[r.pageIndexQueryStringKey])<Number(i[r.pageIndexQueryStringKey])?1:Number(t[r.pageIndexQueryStringKey])>Number(i[r.pageIndexQueryStringKey])?-1:0:0}},function(n,i){var i=e();typeof i.q!="undefined"&&u(r,i,{animate:t,direction:i.direction==="backward"?"slideRight":"slideLeft"})});n(document).bind("filterChange",function(){i(r)}).bind("filterAdd",function(t,i){n(r.tags).tagList("addTag",i)}).bind("filterRemove",function(t,i){n(r.tags).tagList("removeTag",i.name)}).bind("tagRemove",function(t,i){n(r.filters+'[data-filtername="'+i+'"]').filterSelector("val","")});n(r.searchTextInput).live("keypress",function(n){if(n.which===13)return i(r),n.preventDefault(),n.stopPropagation(),!1});n(r.searchSubmitInput).live("click",function(){return i(r),!1});n(r.searchSortSelect).live("change",function(){i(r)});n("#"+r.wrapperId+" div.search-results div.content-list-footer a").live("click",function(){var i=Number(n(this).attr("href").split("=")[1].split("#")[0]),t={};return t[r.pageIndexQueryStringKey]=i,n.telligent.evolution.url.hashData(t),!1});p(r)}};typeof n.telligent=="undefined"&&(n.telligent={});typeof n.telligent.evolution=="undefined"&&(n.telligent.evolution={});typeof n.telligent.evolution.widgets=="undefined"&&(n.telligent.evolution.widgets={});n.telligent.evolution.widgets.searchResultsList=w}(jQuery),function(n){var t=n.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %><\/li> <% }); %> '),i=function(i,r){n.telligent.evolution.get({url:i,dataType:"json",success:function(n){n&&r(t(n))}})};n.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(n,t){if(t.detailsurl){var u=null,r=n.find("ul.details"),f=r.html();n.bind("mouseenter",function(){console.log("mouse-enter");u!==null?(r.addClass("popup"),r.html(u)):i(t.detailsurl,function(n){u=n;r.html(u);r.addClass("popup")})}).bind("mouseleave",function(){r.html(f);r.removeClass("popup")})}}}}(jQuery);