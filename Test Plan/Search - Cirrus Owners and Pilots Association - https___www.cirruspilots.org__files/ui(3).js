(function(n){n.fn.multiColumnMenu=function(t){function v(t){n("li.more",t).remove();n("li.collapsed",t).removeClass("collapsed")}function y(t){var e=t.children("li").filter(function(){return n(this).position().top>n(this).parent().scrollTop()}),r,f,u;e.length>0&&(r=n('<li class="more has-menu" />'),f=n('<a href="#" />').addClass("with-child").append(n("<span />").html("<span><\/span>"+i.moreText)),r.append(f),r.appendTo(t),u=n("<ul />"),r.append(u),p(r,u),r.hover(function(){var t=r.parents(".mighty-menu"),n;t.addClass("mighty-menu-container-hover");n=t.parents(".layout-region");n.addClass("mighty-menu-region-hover");n.parents(".header-fragments").addClass("mighty-menu-fragment-hover");n.parents(".content-fragment-page").addClass("mighty-menu-fragment-hover");n.parents(".footer-fragments").addClass("mighty-menu-fragment-hover");u.stop(!0,!0).fadeIn();r.addClass("active")},function(){u.stop(!0,!0).delay(i.delay).hide(0,function(){var t,n;r.removeClass("active");t=r.parents(".mighty-menu");t.removeClass("mighty-menu-container-hover");n=t.parents(".layout-region");n.removeClass("mighty-menu-region-hover");n.parents(".header-fragments").removeClass("mighty-menu-fragment-hover");n.parents(".content-fragment-page").removeClass("mighty-menu-fragment-hover");n.parents(".footer-fragments").removeClass("mighty-menu-fragment-hover")})}))}function p(t,i){if(t.position().top>t.parent().scrollTop()+1){var r=t.prevAll(":not(.collapsed)");r.length>0&&(g(t,i,n(r[0])),p(t,i))}else return}function g(n,t,i){var r=i.clone(!0);t.prepend(r);i.addClass("collapsed")}var i={},w;n.extend(i,n.fn.multiColumnMenu.defaults,t.configuration);var r=n(this),u=r.children("li.has-menu"),o=[],f=undefined,s=function(t){return n(".menu-content",t)},h=function(t){return n(".links > ul",t)},c=function(n,t){n.removeClass("active");t.hide()},e=function(n,t){c(n,t);n.parents(".mighty-menu").removeClass("mighty-menu-container-expanded");var i=n.parents(".layout-region");i.removeClass("mighty-menu-region-expanded");i.parents(".header-fragments").removeClass("mighty-menu-fragment-expanded");i.parents(".content-fragment-page").removeClass("mighty-menu-fragment-expanded");i.parents(".footer-fragments").removeClass("mighty-menu-fragment-expanded");n.removeClass("active")},b=function(r,f){var y=r.attr("data-id"),v;u.filter("active").each(function(){var t=n(this);c(t,s(t))});u.parents(".mighty-menu").addClass("mighty-menu-container-expanded");v=r.parents(".layout-region");v.addClass("mighty-menu-region-expanded");v.parents(".header-fragments").addClass("mighty-menu-fragment-expanded");v.parents(".content-fragment-page").addClass("mighty-menu-fragment-expanded");v.parents(".footer-fragments").addClass("mighty-menu-fragment-expanded");r.addClass("active");o.indexOf(y)==-1?n.telligent.evolution.get({data:{menuId:i.menuId,parentId:y,menuCloseLabel:i.menuCloseLabel},url:t.urls.getTabContent,success:function(t){o.push(y);f.html(t);f.show();a(h(r));n("a.close",f).click(function(n){n.preventDefault();e(r,f)});l()},defaultErrorMessage:t.resources.errorLoadingMenu}):f.show()},k=function(r){var u=r.attr("data-id");n.telligent.evolution.get({data:{menuId:i.menuId,parentId:u,menuCloseLabel:i.menuCloseLabel},url:t.urls.getTabContent,success:function(n){r.children("ul").replaceWith(n);a(h(r))},error:function(){}})},l=function(){var u=function(t){r.find("li").each(function(){var i=n(this);t.indexOf(i.attr("data-id"))!=-1&&i.addClass("current")})};f===undefined?n.telligent.evolution.post({data:{menuId:i.menuId,url:location.pathname,rewrittenUrlName:i.rewrittenUrlName},url:t.urls.getSelectedIds,success:function(n){f=n;u(f)},error:function(){}}):u(f)},d=function(t,i){n("a:first",t).click(function(n){n.preventDefault();r.children("li.more > ul").hide();t.hasClass("active")?e(t,i):b(t,i)});var u=!1;i.mousedown(function(){u=!0});n(document).mouseup(function(n){!u&&t.hasClass("active")&&t.has(n.target).length===0&&i.has(n.target).length===0&&e(t,i);u=!1})},a=function(t){var i=t.children("li"),u,r;if(i.length<2){n(i[0]).addClass("new-row").prepend('<span class="separator"><\/span>');return}i.css("float","none");u=t.width()+i.length;i.css("float","left");r=function(t){var f=function(){for(var f=0,r=t;r<i.length;r++)if(f+=n(i[r]).outerWidth(!0),f>u)return r>t?r-1:t;return r>t?r-1:t}(),o=function(){for(var u=0,e,r=t;r<=f;r++)e=n(i[r]).height(),e>u&&(u=e);return u}(),e;if(n(i[t]).addClass("new-row").prepend('<span class="separator"><\/span>'),f!=t)for(e=t;e<=f;e++)n(i[e]).height(o);f+1<i.length&&r(f+1)};r(0)};l();i.useHeader?u.each(function(){var t=n(this),i=s(t);d(t,i)}):u.each(function(){var t=n(this);k(t)});v(r);i.enableMoreMenu&&y(r);w=function(){var n={};return function(t,i,r){r||(r="Don't call this twice without a uniqueId");n[r]&&clearTimeout(n[r]);n[r]=setTimeout(t,i)}}();n(window).resize(function(){w(function(){v(r);i.enableMoreMenu&&y(r)},250,"mightymenu.multicolumn")})};n.extend(n.fn.multiColumnMenu,{defaults:{enableMoreMenu:!0,useHeader:!1,moreText:"More"}})})(jQuery),function(n){n.fn.hoverIntent=function(t,i){var r={sensitivity:7,interval:100,timeout:0};r=n.extend(r,i?{over:t,out:i}:t);var u,f,e,o,s=function(n){u=n.pageX;f=n.pageY},h=function(t,i){if(i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(e-u)+Math.abs(o-f)<r.sensitivity)return n(i).unbind("mousemove",s),i.hoverIntent_s=1,r.over.apply(i,[t]);e=u;o=f;i.hoverIntent_t=setTimeout(function(){h(t,i)},r.interval)},l=function(n,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[n])},c=function(t){for(var u=(t.type=="mouseover"?t.fromElement:t.toElement)||t.relatedTarget,f,i;u&&u!=this;)try{u=u.parentNode}catch(t){u=this}if(u==this)return!1;f=jQuery.extend({},t);i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t));t.type=="mouseover"?(e=f.pageX,o=f.pageY,n(i).bind("mousemove",s),i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){h(f,i)},r.interval))):(n(i).unbind("mousemove",s),i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){l(f,i)},r.timeout)))};return this.mouseover(c).mouseout(c)}}(jQuery),function(n){n.fn.superfish=function(t){var i=n.fn.superfish,r=i.c,o=n(['<span class="',r.arrowClass,'"> &#187;<\/span>'].join("")),u=function(){var t=n(this),i=e(t);clearTimeout(i.sfTimer);t.showSuperfishUl().siblings().hideSuperfishUl()},f=function(){var r=n(this),f=e(r),t=i.op;clearTimeout(f.sfTimer);f.sfTimer=setTimeout(function(){var f,i;t.retainPath=n.inArray(r[0],t.$path)>-1;r.hideSuperfishUl();(r.parents("."+t.hoverClass).length<=0||r.parents("."+t.hoverClass+".current").length>0)&&(f=r.parents(".mighty-menu"),f.removeClass("mighty-menu-container-hover"),i=f.parents(".layout-region"),i.removeClass("mighty-menu-region-hover"),i.parents(".header-fragments").removeClass("mighty-menu-fragment-hover"),i.parents(".content-fragment-page").removeClass("mighty-menu-fragment-hover"),i.parents(".footer-fragments").removeClass("mighty-menu-fragment-hover"));t.$path.length&&r.parents(["li.",t.hoverClass].join("")).length<1&&u.call(t.$path)},t.delay)},e=function(n){var t=n.parents(["ul.",r.menuClass,":first"].join(""))[0];return i.op=i.o[t.serial],t},s=function(n){n.addClass(r.anchorClass).append(o.clone())};return this.each(function(){var h=this.serial=i.o.length,e=n.extend({},i.defaults,t),o;e.onPreInit.call(this);e.$path=n("li."+e.pathClass,this).slice(0,e.pathLevels).each(function(){n(this).addClass([e.hoverClass,r.bcClass].join(" "))});i.o[h]=i.op=e;n("li:has(ul)",this)[n.fn.hoverIntent&&!e.disableHI?"hoverIntent":"hover"](u,f).each(function(){(e.autoArrows||n(this).hasClass("more"))&&s(n(">a:first-child",this))}).not("."+r.bcClass).hideSuperfishUl();o=n("a",this);o.each(function(n){var t=o.eq(n).parents("li");o.eq(n).focus(function(){u.call(t)}).blur(function(){f.call(t)})});e.onInit.call(this)}).each(function(){var t=[r.menuClass];!i.op.dropShadows||n.browser.msie&&n.browser.version<7||t.push(r.shadowClass);n(this).addClass(t.join(" "))})};var t=n.fn.superfish;t.o=[];t.op={};t.IE7fix=function(){var i=t.op;n.browser.msie&&n.browser.version>6&&i.dropShadows&&i.animation.opacity!=undefined&&this.toggleClass(t.c.shadowClass+"-off")};t.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};t.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onPreInit:function(){},onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};n.fn.extend({hideSuperfishUl:function(){var i=t.op,u=i.retainPath===!0?i.$path:"",r;return i.retainPath=!1,r=n(["li.",i.hoverClass].join(""),this).add(this).not(u).removeClass(i.hoverClass).find('>ul:not(".static")').hide().css("visibility","hidden"),i.onHide.call(r),this},showSuperfishUl:function(){var i=t.op,e=t.c.shadowClass+"-off",r=this.addClass(i.hoverClass).find(">ul:hidden").css("visibility","visible"),f,u;if(t.IE7fix.call(r),i.onBeforeShow.call(r),!n(this).hasClass("current")){f=this.parents(".mighty-menu");i.onBeforeShow(f.addClass("mighty-menu-container-hover"));u=f.parents(".layout-region");i.onBeforeShow(u.addClass("mighty-menu-region-hover"));i.onBeforeShow(u.parents(".header-fragments").addClass("mighty-menu-fragment-hover"));i.onBeforeShow(u.parents(".content-fragment-page").addClass("mighty-menu-fragment-hover"));i.onBeforeShow(u.parents(".footer-fragments").addClass("mighty-menu-fragment-hover"))}return r.length>0&&t.handleCascade(r),r.animate(i.animation,i.speed,function(){t.IE7fix.call(r);i.onShow.call(r)}),this}});t.handleCascade=function(t){var i=n(t.parents("ul")[0]),s,f,r,h,e,o,u,l,a,v,c,y;i.length>0&&(s=0,f=t.parents(".mighty-menu"),f!==null&&f.offset()!==null&&(s=f.offset().left),r="right",h="right",t.parents("ul[data-direction]").length>0&&(r=n(t.parents("ul[data-direction]")[0]).data("direction")),e=0,i.offset()!==null&&(e=i.offset().left-s),o=n(t.parents("ul")[0]).hasClass("sf-menu")||i.hasClass("static"),u=t.parent(),r==="right"?(l=e+i.outerWidth(),o&&(l=u.offset().left-s),f.outerWidth()-l<t.outerWidth()&&(r="left")):t.outerWidth()>e&&!i.parent().hasClass("more")&&(r="right"),t.attr("data-direction",r),t.children("li").children("ul").length>0&&(a=t.outerWidth(),o&&(a=u.outerWidth()),v=a+t.outerWidth(),c=e,o&&u.offset()!==null&&i.offset()!==null&&(c=u.offset().left-i.offset().left+t.outerWidth()),r==="right"?(y=c+t.outerWidth(),o&&u.offset()!==null&&i.offset()!==null&&(y=u.offset().left-i.offset().left+t.outerWidth()),h=y+v>f.outerWidth()?"left":"right"):h=v>c&&!i.parent().hasClass("more")?"right":"left"),t.attr("data-direction-child",h))}}(jQuery),function(n){n.fn.getHiddenDimensions=function(n){var t=this,r={position:"absolute",visibility:"hidden",display:"block"},i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},u=t.parents().andSelf().not(":visible"),f=n==null?!1:n,e=[];return u.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),i.width=t.width(),i.outerWidth=t.outerWidth(f),i.innerWidth=t.innerWidth(),i.height=t.height(),i.innerHeight=t.innerHeight(),i.outerHeight=t.outerHeight(f),u.each(function(n){var i=e[n];for(var t in r)this.style[t]=i[t]}),i}}(jQuery),function(n){n.fn.mightyMenu=function(t){function l(t){var r=n('<li class="current more"><a class="with-child sf-with-ul" href="javscript:void(0);"><span>'+i.moreText+"<\/span><\/a><\/li>"),u;return t.append(r),u=r.outerWidth(!0),r.remove(),u}function a(){s(r,e)}function v(){i.pathLevels==1&&r.children("li").children("ul").each(function(t,i){var r=n(i);s(r,u)})}function s(t,r){var s=n.extend({},{moreLinkWidth:l(t)},t.data(o)),h=t.children("li"),y=r.width()-s.moreLinkWidth,p=t.css("visibility")=="hidden",u=0,w=function(){var t=0;return h.each(function(r){var f=n(this),e=f.children("a:first"),o=e.hasClass("sf-with-ul");!o&&i.autoArrows&&f.children("ul").length>0&&e.addClass("sf-with-ul");t=t+(p?f.getHiddenDimensions(!0).outerWidth:f.outerWidth(!0));o||e.removeClass("sf-with-ul");t<y&&(u=r)}),t}(),b=r.width()<=w,e,v;if(u>0&&u<h.length-1&&b){var f=n('<li class="more" />'),c=t.children("li:gt("+u+")"),a=c.clone(),k=n('<a href="#" />').addClass("with-child").append(n("<span />").html("<span><\/span>"+i.moreText));f.append(k);a.each(function(t,i){var r=n(i).find("ul.static");r.length>0&&n(r[r.length-1]).removeClass("static")});e=n("<ul />").append(a);v=t.parents(".content-fragment.mighty-menu").hasClass("two-static-levels");v&&t.parents("ul").length===0&&e.addClass("static");f.append(e);f.appendTo(t);c.addClass("collapsed")}t.data(o,s)}function y(){n("li.more",r).remove();n("li.collapsed",r).removeClass("collapsed")}function p(){r.children("li:not(.collapsed, .more)").children("ul").each(function(t,i){var r=n(i),u,f,e;if(!r.hasClass("centered")&&(u=r.parents("li:first"),!u.hasClass("current"))){f=r.children("li");e=n(f[0]);e.css("margin-left",0);var o=function(){var t=Math.floor((f.length+1)/2);return f.each(function(){t=t+n(this).getHiddenDimensions(!0).outerWidth}),t}(),s=function(){return o/2}(),h=function(){return Math.floor(u.width()/2+u.offset().left-u.parents("ul:first").offset().left)}(),c=function(){return r.width()-o}(),l=function(){if(h>s){var n=h-s;return n>c?c:n}return 0}();e.css("margin-left",l);r.addClass("centered")}})}function h(){var t=(new Date).getTime();t-f>2e3&&(n(window).unbind("resize",h),setTimeout(function(){c()},1));f=t}function c(){y();i.enableMoreMenu&&(a(),v());u.superfish(i);i.centerSubMenus&&p();n(window).resize(h)}var i={},f;n.extend(i,n.fn.mightyMenu.defaults,t);var u=n(this),e=u.parent(),r=n("ul.sf-menu",e),o="currentState";f=(new Date).getTime();c();i.autoArrows=!1;n(document).trigger("menuLoaded",[u,i.moreText,i])};n.extend(n.fn.mightyMenu,{defaults:{enableMoreMenu:!0,centerSubMenus:!0}})}(jQuery),function(n){namespace("$.couto.mightymenu.widgets");var i=function(i){var u,r,f;i.configuration.onLoadAdjustment?(u=i.menu.attr("id")+"fontTest",n("body").append('<span id="'+u+'" style="font:'+n("li:first span:first",i.menu).css("font")+'">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890~!@#$%^&*()_+-=`<>{}[]|\\:;,."\'?/<\/span>'),r=n("#"+u),f=r.outerWidth(!0),r.hide(),n(window).load(function(){var n=0,u=setInterval(function(){r.show();var e=r.outerWidth(!0);r.hide();(n>10||e!=f)&&(t(i),clearInterval(u),r.remove());n++},33)})):t(i)},t=function(t){if(t.configuration.multiColumn)t.menu.multiColumnMenu(t);else{t.populated=!1;t.menu.mightyMenu({moreText:t.resources.moreMenu,enableMoreMenu:t.configuration.enableMoreMenu,centerSubMenus:t.configuration.centerSubMenus,pathClass:"current",pathLevels:t.configuration.pathLevels,delay:t.configuration.delay,onInit:function(){var i=n(this),r,e;n("li.sf-breadcrumb:has(ul)",this).length>=1&&(i.addClass("sub-menu-item-selected"),i.parents(".header-fragments").length>0&&n(".content-fragment-page").addClass("with-2-level-menu"));n("li:last-child",i).addClass("last");n("li:last",i).addClass("absolute-last");var u=n("li.current",i),f=u.has(".current"),o=u.not(f);f.addClass("has-children-selected");o.addClass("absolute-current");r=undefined;e=function(){var u=function(t){i.find("li").each(function(){var i=n(this);t.indexOf(i.attr("data-id"))!=-1&&i.addClass("current")})};r===undefined?n.telligent.evolution.post({data:{menuId:t.configuration.menuId,url:location.pathname,rewrittenUrlName:t.configuration.rewrittenUrlName},url:t.urls.getSelectedIds,success:function(n){r=n;u(r)},error:function(){}}):u(r)};e()}});var i=n(window).width()/2;t.wrapper.filter(".mighty-menu-vertical").each(function(){var t=n(this).offset();t.left>i&&n(this).addClass("show-left")});r(t)}},r=function(t){t.popup=n("<div><\/div>").glowPopUpPanel({cssClass:"menu group-application-navigation-content new-post-button-menu",position:"down",zIndex:1e3,hideOnDocumentClick:!0});t.popup.bind("glowPopUpPanelIsShown",function(){t.newPost.addClass("selected")}).bind("glowPopUpPanelHidden",function(){t.newPost.removeClass("selected")}).glowPopUpPanel("html","");t.newPost.click(function(){return t.popup.glowPopUpPanel("isShown")?t.popup.glowPopUpPanel("hide"):u(t),!1})},u=function(t){if(t.populated){t.popup.glowPopUpPanel("show",t.newpost);return}n.telligent.evolution.get({url:t.urls.newPost,success:function(i){var u=n(i),r=u.find(".navigation-item a");if(r.length==0)t.newPost.hide();else if(r.length==1)try{window.location.href=r.get(0).href}catch(f){}else t.popup.glowPopUpPanel("html",u),t.popup.glowPopUpPanel("children").parents("div").parents("div").addClass("new-post-button-drop-down mighty-menu "+t.classes.menuStyle),t.popup.glowPopUpPanel("show",t.newPost),t.populated=!0},defaultErrorMessage:t.resources.error})};n.couto.mightymenu.widgets.mightymenu={register:function(n){i(n)}}}(jQuery);